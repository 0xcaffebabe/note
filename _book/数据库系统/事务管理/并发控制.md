# 基于锁的协议

- 锁

  - 共享锁：可读不可写
  - 排它锁：可读可写

**封锁协议**

- 锁的授予

- 两阶段封锁协议

  - 增长阶段：可以获得锁，不能释放锁
  - 缩减阶段：可以释放锁，不能获得锁

- 封锁的实现

- 基于图的协议

# 死锁处理

- 死锁预防

  - 对加锁请求进行排序
  - 有可能导致死锁时，进行事务回滚

**锁超时**

- 死锁检测与恢复

  - 等待图
  - 恢复

    - 选择牺牲者
    - 回滚
    - 饿死

# 多粒度

# 基于时间戳的协议

- 时间戳
- 时间戳排序协议
- Thomas写规则

# 基于有效性检查的协议

# 多版本机制

## 多版本时间戳排序

## 多版本两阶封锁

# 快照隔离

# 插入操作、删除操作与谓词读

# 实践中的弱一致性级别

# 索引结构中的并发
