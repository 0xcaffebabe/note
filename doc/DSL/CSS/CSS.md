# CSS

> 层叠样式表（英语：Cascading Style Sheets，缩写：CSS；又称串样式列表、级联样式表、串接样式表、阶层式样式表）是一种用来为结构化文档（如HTML文档或XML应用）添加样式（字体、间距和颜色等）的计算机语言，由W3C定义和维护。当前最新版本是CSS2.1，为W3C的推荐标准。CSS3现在已被大部分现代浏览器支持，而下一版的CSS4仍在开发中。

## 语法规则

### At规则

- @charset ：<https://www.w3.org/TR/css-syntax-3/>
- @import ：<https://www.w3.org/TR/css-cascade-4/>
- @media ：<https://www.w3.org/TR/css3-conditional/>
- @page ：<https://www.w3.org/TR/css-page-3/>
- @counter-style ：<https://www.w3.org/TR/css-counter-styles-3>
- @keyframes ：<https://www.w3.org/TR/css-animations-1/>
- @fontface ：<https://www.w3.org/TR/css-fonts-3/>
- @supports ：<https://www.w3.org/TR/css3-conditional/>
- @namespace ：<https://www.w3.org/TR/css-namespaces-3/>

### 选择器

- <https://www.w3.org/TR/selectors-4/>

![2022630152944](/assets/2022630152944.webp)

### 属性和值

属性不允许使用连续的两个中划线开头，这样的属性会被认为是 CSS 变量

值可能是以下类型：

- CSS 范围的关键字：initial，unset，inherit，任何属性都可以的关键字。
- 字符串：比如 content 属性。
- URL：使用 url() 函数的 URL 值。
- 整数 / 实数：比如 flex 属性。
- 维度：单位的整数 / 实数，比如 width 属性。
- 百分比：大部分维度都支持。颜色：比如 background-color 属性。
- 图片：比如 background-image 属性。
- 2D 位置：比如 background-position 属性。
- 函数：来自函数的值，比如 transform 属性。

## 书写规范

[BEM规范](https://juejin.cn/post/6844903672162304013)

- 空格规范

```css
/*  选择器 与 { 之间必须包含空格。 */
.selector {
  /* 属性名 与之后的 : 之间不允许包含空格， : 与 属性值 之间必须包含空格 */
  font-size: 12px;
}
```

- 选择器规范

```css
/*  并集选择器，每个选择器声明必须独占一行 */
.post,
.page,
.comment {
    line-height: 1.5;
}
```
一般情况情况下，选择器的嵌套层级应不大于 3 级，位置靠后的限定条件应尽可能精确

- 属性规范

```css
/* 属性定义必须另起一行。 */
.selector {
    margin: 0;
    padding: 0;
    /* 属性定义后必须以分号结尾。 */
}
```

## 使用方式

- 内联

```html
<标签名 style="属性1:属性值1; 属性2:属性值2; 属性3:属性值3;"> 内容 </标签名>
```

- 内嵌

```html
<head>
<style type="text/CSS">
    选择器（选择的标签） { 
      属性1: 属性值1;
      属性2: 属性值2; 
      属性3: 属性值3;
    }
</style>
</head>
```

- 外联

```html
<head>
  <link rel="stylesheet" type="text/css" href="css文件路径">
</head>
```

属性   | 作用
---- | :-------------------------------------------------------
rel  | 定义当前文档与被链接文档之间的关系，在这里需要指定为"stylesheet"，表示被链接的文档是一个样式表文件。
type | 定义所链接文档的类型，在这里需要指定为"text/CSS"，表示链接的外部文件为CSS样式表。我们都可以省略
href | 定义所链接外部样式表文件的URL，可以是相对路径，也可以是绝对路径。

- 比较

样式表   | 优点           | 缺点           | 使用情况    | 控制范围
----- | ------------ | ------------ | ------- | ---------
行内样式表 | 书写方便，权重高     | 没有实现样式和结构相分离 | 较少      | 控制一个标签（少）
内部样式表 | 部分结构和样式相分离   | 没有彻底分离       | 较多      | 控制一个页面（中）
外部样式表 | 完全实现结构和样式相分离 | 需要引入         | 最多，强烈推荐 | 控制整个站点（多）

## 三大特性

### 层叠性

所谓层叠性是指多种CSS样式的叠加。

样式冲突，遵循的原则是**就近原则。** 那个样式离着结构近，就执行那个样式。

### 继承性

子元素可以继承父元素的样式（**text-，font-，line-这些元素开头的可以继承，以及color属性**）

### 优先级

选择器列表是用逗号分隔的复杂选择器序列；复杂选择器则是用空格、大于号、波浪线等符号连接的复合选择器；复合选择器则是连写的简单选择器组合

- 第一优先级：无连接符号
- 第二优先级
  - “空格”
  - “~”
  - “+”
  - “>”
  - “||”
- 第三优先级：“,”

| 标签选择器             | 计算权重公式 |
| ---------------------- | ------------ |
| 继承或者 *             | 0,0,0,0      |
| 每个元素（标签选择器） | 0,0,0,1      |
| 每个类，伪类           | 0,0,1,0      |
| 每个ID                 | 0,1,0,0      |
| 每个行内样式 style=""  | 1,0,0,0      |
| 每个!important  重要的 | ∞ 无穷大     |

- 权重叠加
  - div ul  li   ------>      0,0,0,3
  - .nav ul li   ------>      0,0,1,2
  - a:hover      -----—>   0,0,1,1
  - .nav a       ------>      0,0,1,1

## 排版

### 正常流

- 依次排列，排不下了换行

正常流基础上，有 float 相关规则，使得一些盒占据了正常流需要的空间，可以把 float 理解为“文字环绕”

还有 vertical-align 相关规则规定了如何在垂直方向对齐盒

#### 原理

- 当遇到块级盒：排入块级格式化上下文（也就是会换行）
- 当遇到行内级盒或者文字：首先尝试排入行内级格式化上下文，如果排不下，那么创建一个行盒，先将行盒排版（行盒是块级，所以到第一种情况），行盒会创建一个行内级格式化上下文
- 遇到 float 盒：把盒的顶部跟当前行内级上下文上边缘对齐，然后根据 float 的方向把盒的对应边缘对到块级格式化上下文的边缘，之后重排当前行盒

## 颜色

- RGB，符合光谱三原色理论：红、绿、蓝三种颜色的光可以构成所有的颜色，使用三个整数来表示
- RGBA： 是代表 Red（红色）、Green（绿色）、Blue（蓝色）和 Alpha 的色彩空间
- CMYK：在印刷行业，使用的就是这样的三原色（品红、黄、青）来调配油墨，这种颜色的表示法叫做 CMYK，它用一个四元组来表示颜色，三原色调配黑色，经济上是不划算的，所以印刷时会单独指定黑色
- HSL：用一个值来表示人类认知中的颜色，我们用专业的术语叫做色相（H）。加上颜色的纯度（S）和明度（L），就构成了一种颜色的表示

### 渐变

```css
/* 线性渐变 */
linear-gradient(direction, color-stop1, color-stop2, ...);
/* 放射性渐变 */
radial-gradient(shape size at position, start-color, ..., last-color);
```