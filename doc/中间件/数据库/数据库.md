---
tags: ['数据库']
book: [
    {name: '数据库系统概念'}
]
---

# 数据库

> 数据库是“按照数据结构来组织、存储和管理数据的仓库”。是一个长期存储在计算机内的、有组织的、有共享的、统一管理的数据集合

数据库系统的目标是为了解决文件处理系统的弊端：

1. 数据冗余和不一致
2. 数据访问困难
3. 数据孤立
4. 完整性问题
5. 原子性问题
6. 并发访问异常
7. 安全性问题

## 数据库的4个基本概念

- 数据：描述事物的符号记录
- 数据库
- 数据库管理系统
- 数据库系统

## 数据系统的特点

- 数据结构化
- 数据共享性高、冗余度低且易于扩充
- 数据独立性高
- 数据由数据库管理系统统一管理和控制

## 数据视图

系统开发人员通过几个层次上的抽系来对用户屏蔽复杂性，以简化用户与系统的交互

物理层（实际数据在物理上的存储结构）->逻辑层（数据库中存储什么数据及这些数据间存 在什么关系）->视图层（某种视角看到的数据）

实例是特定时刻存储在数据库中的信息集合，模式是数据库的整体设计。因此，数据库系统通常可以分为几种不同的模式：

* 物理模式：描述数据库在物理上的设计
* 逻辑模式：描述在逻辑层数据库的设计
* 用户模式：数据库用户的视图，是与某一用户有关的数据的逻辑表示

数据模型是描述数据、数据联系、数据语义以及一致性约束等的一套工具，有四类

- 关系模型：用表的集合来表示数据和数据间的联系
- 实体-联系模型：基于对现实世界这样的一种认识，现实世界由一组称为实体的基本对象间的联系构成
- 基于对象的数据模型：类似JAVA等OOP语言的面向对象特性
- 半结构化数据模型：如[XML](/DSL/xml.md)

### 关系模型

关系模型基本概念对应的关系数据库的概念：

- 关系：表
- 元组：行
- 属性：表中的列
- 关系实例：关系中的一个特定实例，也就是所包含的一组特定的行
- 域：属性取值集合
- 空值

#### 码

用元组的属性来区分不同的元组

- 超码（superkey）：一个或多个属性的集合，用来唯一标志一个元组
- 候选码(candidatekey)：在超码的基础上，在任意添加属性，都是超码的超集
- 主码：被数据库设计者选中，用来区分不同元组的候选码
- 外码：参照关系的主码

#### 模式图

![一个模式图](/assets/202031885639.png)

#### 关系运算

- 选择 (σ)
- 投影 (π)
- 自然连接 (⋈)
- 笛卡尔积（X）
- 并（∪）

## 形式化关系查询语言

### 关系代数

一种过程化查询语言。它包括 一个运算的集合，这些运算以一个或两个关系为输入， 产生一个新的关系作为结果

运算类型：

- 选择 (σ)：对应SQL中的WHERE子句
- 投影 (π)：对应SQL中SELECT 中选择列（加上DISTINCT关键字），因为投影会去除重复结果
- 并运算：∪
- 集合差运算：$A-B$
- 笛卡尔积运算：两张表进行 `select * from A,B`，通常都要在实际SQL中避免直接使用笛卡尔积，因为它会使“数据爆炸”
- 更名运算：$ρ_x(a1,a2,a3..)(E)$，表示将表达式E命名为x，并且把各项属性值命名为a1，a2...
- 集合交运算：∩
- 自然连接运算：⋈：`select * from A,B wehre a.id = b.id`
- 赋值运算：←（比如temp1 ← R X S）
- 外连接运算
  - 左外连接：⟕，保留左边的值
  - 右外连接：⟖，保留右边的值
  - 全外连接：⟗
- 广义投影：在投影属性的基础上再对属性做运算
- 聚集：min、max、sum...

关系代数中基本的表达式是：

- 数据库中的一个关系
- 一个常数关系，常数关系可以理解为（1，2，,3..）常数集合

## 数据库语言[SQL](/DSL/SQL.md)

使用 DDL 来定义数据模式，使用 DML 来表达数据库的查询与更新

DML 分为过程式与声明式，像SQL就是典型的声明式

## 关系数据库基本概念

- 表：数据库表是一系列二维数组的集合，用来代表和储存数据对象之间的关系
- 数据操纵语言：特点是非过程化（告诉它做说明，而不必告诉它怎么做）
- 数据定义语言
- 应用程序访问数据库，通过提供应用程序接口：如ODBC与JDBC，另外一种方式则是可以提供一个预处理，将DML语言转换成宿主的语言调用

## 数据库设计

### 规范化

目标是生成 一个关系模式即可，使存储信息时没有不必要的冗余，最常使用的方法是使用函数依赖


## 数据存储和查询

### 存储管理器

负责在数据库中存储的低层数据与应用程序以及向系统提交的查询之间提供接口的部件

- 权限及完整性管理器
- 事务管理器
- 文件管理器
- 缓冲区管理器
- 数据文件
- 数据字典
- 索引

### 查询处理器

- DDL解释器
- DML编译器
- 查询执行引擎

## 事务管理

特性：A（原子性）C（一致性）I（隔离性）D（持久性）

### 事务

定义：数据库应用中完成单一逻辑功能的操作集合

## 数据库体系结构

- 两层体系结构：客户端直接与数据进行交互
- 三层体系结构：客户端通过一个服务端与数据进行交互

## 数据挖掘与信息检索

数据挖掘定义：从数据库中发现知识

## 特种数据库

- 面向对象数据库
- 半结构化数据库

## 数据库系统的历史

- 1950s-1960s：磁带存储
- 1960s-1970s：硬盘
- 1980s：关系数据库取代网状数据库
- 1990s：互联网与数据库
- 2000s：数据分析与数据库

## NoSQL

充分利用各种不同NoSQL数据库的特性来助推业务

- MongoDB 的文档特性
- Redis 的快速寻址特性
- ...
