---
tags: ['数据库']
books: [
  {name: '数据库系统概念', chapters: ['第11章']}
]
---

# 索引与散列

- 顺序索引: 基于值的顺序排序
- 散列索引：基于将值平均分布到散列桶

索引好坏的评价维度

- 访问类型：是否支持范围访问、特定值访问
- 访问时间
- 插入时间
- 删除时间
- 空间开销

**搜索码**：用于在文件中查找记录的属性或属性集

## 顺序索引

- 稠密索引: 每个属性都有一个索引项
- 稀疏索引: 只为某些属性建立索引

![稠密索引与稀疏索引](/assets/屏幕截图%202022-04-28%20173324.png)

### 多级索引

![多级索引](/assets/2022428173815.png)

- 通过将一级索引表放置在内存中加快搜索速度

### 索引的更新

#### 插入新记录

对于稠密索引：如果该索引值不存在于索引中，则在合适的位置插入索引值，如果存在于索引中，则找到索引值对应的记录链表，在链表尾部追加新记录

对于稀疏索引：在合适的索引值范围内添加新记录

#### 删除记录

对于稠密索引：如果该记录时该索引值的唯一记录，删除即可。否则执行链表的节点删除操作

对于稀疏索引：如果包含了索引值，则删除索引值对应的记录，并调整索引范围

## 辅助索引

在索引与实际记录之间的一个中间层

![2022428174651](/assets/2022428174651.png)

## 多码上的索引

- 索引由多个属性组合而成

## [B+树索引](/中间件/数据库/mysql/索引.md#B+%20Tree原理)

## B+树更新的复杂性

## 辅助索引和记录重定位

## 字符串上的索引

**前缀压缩**

## B+树索引的批量加载

## B树索引文件

# 多码访问

## 多码索引

搜索码（k1,k2k,k3...）

## 覆盖索引

存储附加属性

# 静态散列

## 散列函数

- 分布均匀
- 分布随机

## 桶溢出处理

![](https://upload-images.jianshu.io/upload_images/6161179-bdfd18b032e37082.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/838/format/webp)

- 桶不足
- 偏斜

## 散列索引

# 动态散列

> 散列函数可动态改变

## 数据结构

![enter image description here](https://ask.qcloudimg.com/http-save/yehe-1008345/wjz044kc5l.jpeg?imageView2/2/w/1620)

- 查询
- 更新

## 静态列表VS动态散列

- 动态散列：性能不随文件增长降低。空间开销小。并且增加了一个中间层，带来微小的性能损失。

# 顺序索引和散列的比较

# 位图索引

> 位的一个简单数组

## 位图操作的高效实现

## 位图与B+树

# SQL中的索引定义

```sql
CREATE INDEX <索引名> ON <关系名> (属性列表)
```

```sql
CREATE INDEX index_kkk ON user(username) # 在user表上创建username索引
```


