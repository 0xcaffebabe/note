# 单元化架构

为何需要：不断增长的海量用户的需求

所谓单元，是指一个能完成所有业务操作的自包含集合，在这个集合中包含了所有业务所需的所有服务，以及分配给这个单元的数据

- 根据用户单元化

## 核心问题

- 扩展性
  - 数据库的瓶颈限制了应用的扩展
- 数据中心扩展性
  - 物理因素所制约
- 容错性

## 演进

[分层](/软件工程/架构模式/概览.md#分层架构)（根据技术以服务形式划分） -> 

分段（根据业务能力隔离） ->

![屏幕截图 2021-11-01 214743](/assets/屏幕截图%202021-11-01%20214743.png)

单元化架构（独立开发运行的一套套系统）

## 组件

- 单元化架构的最小原子单位
- 在一定域内 拥有一定业务功能的服务
- 组件间有依赖和约束关系

## 名称与版本

- 全局唯一的名称
- 以版本管理的形式来控制单元的演化

## 独立性

设计单元的最终目的就是单元独立开发部署

## 完备性

相关业务场景置于同一单元 逻辑完备

业务单元之间应减少交集

## 通信

单元间的通信都必须通过某种统一的网络接口进行

单元内的组件通过可被允许的通信协议进行通信

## 什么时候用

- 要异地多活
  - 系统功能与地域强关联
  - 高可用、容灾
- 要突破扩展上限
  - 突破单点（机房、数据库）瓶颈
