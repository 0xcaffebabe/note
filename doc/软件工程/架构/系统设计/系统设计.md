---
tags: ['计算机系统', '软件工程', '安全']
---

# 系统设计 · 架构认知总纲

> **在约束条件下做架构决策，并持续演进系统能力的思维模型**。

---

## 一、系统设计的本质

### 1.1 什么是系统设计

**系统设计的本质不是计算 QPS、TPS 或画架构图，而是在多重约束下做取舍。**

系统设计关注的是：

* 系统要解决什么问题（目标）
* 系统受到哪些不可违背的限制（约束）
* 在约束下，如何做结构性选择（决策）
* 这些选择最终塑造了系统的能力边界

> **系统设计 = 约束下的架构决策过程**

---

### 1.2 系统设计关注的不是“功能”，而是“能力”

功能回答的是：

* 系统“能不能做某件事”

系统设计回答的是：

* 系统“在什么条件下、以什么代价、能做到什么程度”

因此，系统设计的核心关注点是：

* 性能
* 扩展性
* 伸缩性
* 可用性
* 安全性
* 可演进性

这些被统称为：**系统的非功能性能力（Quality Attributes）**。

---

## 二、系统设计的四层不变模型

系统设计虽然面临的业务和技术不断变化，但其认知结构是高度稳定的。

### 2.1 四层模型概览

```
业务目标
   ↓
约束条件
   ↓
架构决策
   ↓
系统能力
```

---

### 2.2 业务目标（Why）

系统首先服务于业务目标，而不是技术理想。

常见目标包括：

* 用户规模增长
* 成本可控
* 响应时间要求
* 合规与安全要求

> 没有业务目标的系统设计，只是在堆复杂度。

---

### 2.3 约束条件（Constraint）

约束决定了设计空间的边界。

常见约束包括：

* 流量规模（用户量、QPS、数据量）
* 延迟要求
* 成本预算
* 团队规模与技术能力
* 法规与安全要求

> **约束不是负担，而是设计的前提条件。**

---

### 2.4 架构决策（Decision）

架构设计的核心不是“选什么技术”，而是做出结构性决策，例如：

* 单体 vs 分布式
* 同步 vs 异步
* 强一致 vs 最终一致
* 本地状态 vs 无状态
* 预扩容 vs 弹性扩容

每一个决策，本质上都是在不同系统能力之间做权衡。

---

### 2.5 系统能力（Outcome）

架构决策最终沉淀为系统的能力边界：

* 最大吞吐能力
* 并发承载能力
* 故障恢复能力
* 安全防护能力
* 架构演进空间

---

## 三、系统设计核心能力总览

### 3.1 系统设计能力树

```
系统设计能力
├── 性能
│   ├── 延迟
│   ├── 吞吐
│   └── 并发
├── 扩展性（Scalability）
│   ├── 水平扩展
│   └── 垂直扩展
├── 伸缩性（Elasticity）
│   ├── 无状态设计
│   ├── 自动扩缩容
│   └── 流量治理
├── 可用性
├── 安全性
└── 可演进性
```

> 系统设计的成熟度，体现在能力是否“可预期、可控制、可演进”。

---

## 四、扩展性（Scalability）

### 4.1 扩展性的本质

**如果系统性能的提升与资源投入呈近似线性关系，则系统具备扩展性。**

扩展性回答的问题是：

> 当需求长期增长时，系统是否还能继续支撑？

---

### 4.2 扩展方式

* **水平扩展**：通过增加节点数量提升系统能力
* **垂直扩展**：通过提升单节点能力提升系统性能

扩展性高度依赖于：

* 模块解耦
* 数据分区
* 并行处理能力

---

## 五、伸缩性（Elasticity）

### 5.1 伸缩性的本质

伸缩性关注的是**系统对短期变化的响应能力**。

它回答的问题是：

> 当负载突然变化时，系统能否快速调整资源规模？

---

### 5.2 性能问题 vs 伸缩性问题

* 性能问题：

  * 单用户请求始终很慢
* 伸缩性问题：

  * 单用户很快，但并发升高后整体变慢

---

### 5.3 伸缩性的架构前提

* 服务无状态
* 负载均衡
* 自动化部署与扩缩容

> **无状态是伸缩性的基础前提，而不是优化手段。**

---

## 六、扩展性 vs 伸缩性

| 维度   | 扩展性（Scalability） | 伸缩性（Elasticity） |
| ---- | ---------------- | --------------- |
| 时间尺度 | 长期               | 短期              |
| 关注点  | 能否增长             | 能否动态调整          |
| 架构前提 | 模块化              | 无状态 + 自动化       |
| 成本模型 | 规划型              | 按需型             |
| 失败风险 | 增长受限             | 流量突发崩溃          |

---

## 七、安全性（Security）

### 7.1 安全性的系统设计视角

安全性不是某个独立模块，而是一种**横切系统的架构属性**。

系统设计中的安全性关注：

* 身份与认证
* 访问控制与边界
* 信任模型
* 隔离与最小权限

> **安全问题往往源于架构决策，而非实现细节。**

---

## 八、系统设计的演进视角

### 8.1 不同阶段的设计重点

| 阶段  | 核心关注     |
| --- | -------- |
| 小规模 | 简单性、开发效率 |
| 中规模 | 扩展性、可用性  |
| 大规模 | 伸缩性、治理能力 |

---

### 8.2 演进原则

* 避免过度设计
* 优先保留演进空间
* 用约束驱动复杂度，而非预期

---

## 九、结语

系统设计不是一次性工作，而是伴随系统生命周期持续发生的决策过程。

> **优秀的系统设计，不在于一开始就"设计得多复杂"，而在于：**
>
> **系统是否能够在不断变化的约束下，持续演进而不失控。**

## 关联内容（自动生成）

- [/软件工程/架构/系统设计/可用性.md](/软件工程/架构/系统设计/可用性.md) 可用性是系统设计中关键的非功能性需求之一，与系统设计中的约束、架构决策密切相关，是系统能力的重要体现
- [/软件工程/架构/系统设计/扩展性.md](/软件工程/架构/系统设计/扩展性.md) 扩展性是系统设计核心能力之一，具体阐述了系统如何在负载增长时保持性能，与系统设计中的扩展性概念直接相关
- [/软件工程/架构/系统设计/伸缩性.md](/软件工程/架构/系统设计/伸缩性.md) 伸缩性关注系统对短期变化的响应能力，是系统设计中"弹性"能力的具体体现，与系统设计的架构决策密切相关
- [/软件工程/架构/系统设计/分布式/分布式.md](/软件工程/架构/系统设计/分布式/分布式.md) 分布式系统是实现大规模系统设计的重要架构范式，与系统设计中的架构决策、扩展性、可用性等能力密切相关
- [/软件工程/架构/系统设计/缓存.md](/软件工程/架构/系统设计/缓存.md) 缓存是系统设计中提升性能和扩展性的关键技术手段，是架构决策中的重要考虑因素
- [/软件工程/架构/系统设计/高并发.md](/软件工程/架构/系统设计/高并发.md) 高并发系统设计涉及系统设计中的性能、扩展性、可用性等多方面能力，是系统设计的重要应用场景
- [/软件工程/架构/系统设计/流量控制.md](/软件工程/架构/系统设计/流量控制.md) 流量控制是系统设计中保障系统稳定性和可用性的关键手段，与系统设计中的约束和架构决策密切相关
- [/软件工程/架构/系统设计/可观测性.md](/软件工程/架构/系统设计/可观测性.md) 可观测性是系统设计中确保系统可维护、可演进的重要能力，帮助在系统生命周期中做出更好的架构决策
- [/软件工程/架构/系统设计/网关.md](/软件工程/架构/系统设计/网关.md) 网关是系统架构设计中的重要组件，承担着路由、安全、限流等功能，是实现系统架构目标的重要手段
- [/软件工程/架构/架构.md](/软件工程/架构/架构.md) 架构是系统设计的高级概括，系统设计是架构设计的具体实现过程，两者相互关联，共同构成系统的整体结构
- [/软件工程/架构/架构思维.md](/软件工程/架构/架构思维.md) 架构思维是进行系统设计的基础，指导如何在约束条件下做出架构决策，与系统设计的四层不变模型高度相关
- [/软件工程/架构/演进式架构.md](/软件工程/架构/演进式架构.md) 演进式架构强调架构的持续演进能力，与系统设计中"持续演进"的理念一致，是系统设计的重要发展方向
- [/软件工程/架构/架构治理.md](/软件工程/架构/架构治理.md) 架构治理确保架构决策得到有效执行，是系统设计从理论到实践的重要保障
- [/软件工程/架构/系统设计/混沌工程.md](/软件工程/架构/系统设计/混沌工程.md) 混沌工程是一种验证系统韧性的重要方法，与系统设计中的可用性、容错能力设计密切相关
- [/软件工程/架构/架构重构.md](/软件工程/架构/架构重构.md) 架构重构是系统演进的重要手段，体现了系统设计需要持续适应变化的理念
