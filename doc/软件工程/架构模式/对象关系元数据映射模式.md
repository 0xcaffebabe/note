# 对象-关系元数据映射模式

## 元数据映射

把关系对象映射的信息保存到元数据中(meta data)

### 代码生成

输入元数据，输出实现类的源代码，这种方式是现有的很多快速开发框架所具备

通过读入数据库表结构，就能快速生成后端的controller、service、dao代码以及前端的一个简单增删改查模板

### 反射程序

在运行时读入元数据产生动态行为

这种方式的优点在于灵活性够高，相较于代码生成的源文件，一旦元数据发生变更，代码就得重新生成，并且手动修改这些生成的源文件可能会发生难以预料的错误

但反射的缺点就是性能问题

## 查询对象

一个描述一次数据库查询的对象

*解释器模式*

许多ORM框架都提供了通过宿主语言的方式来描述SQL查询的API

- spring data jpa中的对象查询以及JPQL
- mybatis plus 的queryWrapper

```java
queryWrapper.eq ("a.del_flag", 0 )
```

## 资源库(Repository)

在使用查询对象的基础上，协调领域层与数据源层，使用类似集合的接口访问领域对象

```java
List<Person> findPersonList(QueryWrapper<Person> qw);
```

资源库提供了一个更符合面向对象观点的持久层实现