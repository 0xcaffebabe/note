# 视频技术

![2023312145123](/assets/2023312145123.webp)

## 视频基础

### 色彩格式

- GRAY 色彩空间：使用8位数据的来表示颜色

![GRAY](/assets/2022111194755.webp)

- YUV 色彩空间：Y 表示视频的灰阶值、UV 表示色彩度

![YUV图像示例](/assets/2022111195043.webp)

![yuv420格式表示宽度为 6、高度为 4的图像](/assets/2022111195138.webp)

- RGB 色彩空间：使用三个 8 位无符号整数（0 到 255）表示红色、绿色和蓝色的强度

![2022111195211](/assets/2022111195211.webp)

- HSL 和 HSV 色彩空间
  - HSL，就是色相（Hue）、饱和度（ Saturation）、亮度（ Lightness）
  - HSV 是色相（Hue）、饱和度（ Saturation）和明度（Value）

色相（H）是色彩的基本属性，就是颜色名称，如红色、黄色等；饱和度（S）是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取 0～100% 的数值；明度（V）和亮度（L），同样取 0～100% 的数值

![2022111195421](/assets/2022111195421.webp)

### 色彩空间

> 也叫色域，指某种表色模式用所能表达的颜色构成的范围区域

### 帧率

> 一秒钟刷新的视频图像帧数

### 码率

> 指视频在单位时间内的数据量的大小，一般是 1 秒钟内的数据量，其单位一般是 Kb/s 或者 Mb/s

### 分辨率

> 分辨率通常由宽、高与像素点占用的位数组成，计算方式为图像的宽乘以高

### Stride

指的是图像存储时内存中每行像素所占用的空间，为了能够快速读取一行像素，我们一般会对内存中的图像实现内存对齐，比如 16 字节对齐

![2023312145940](/assets/2023312145940.webp)

如果读取时没有跳过这些填充的区域，那么渲染出来的图像就完全错了，产生花屏

### 缩放算法

目前绝大多数图像的缩放还是通过插值算法：都是使用周围已有的像素值通过一定的加权运算得到“插值像素值”

![2023312152254](/assets/2023312152254.webp)

插值算法：

- 最近邻插值：将目标图像中的目标像素位置，映射到原图像的映射位置；找到原图像中映射位置周围的 4 个像素；取离映射位置最近的像素点的像素值作为目标像素
  - 得到的放大图像大概率会出现块状效应，而缩小图像容易出现锯齿

- 双线性插值：先通过两次线性插值得到两个中间值，然后再通过对这两个中间值进行一次插值得到最终的结果
  - 取待插值像素周围的 4 个像素，将这 4 个像素值插值得到中间像素 m 和 n 的像素值，再对这m n插值，得到最终的像素值

![2023312152848](/assets/2023312152848.webp)

- 双三次插值：通过 BiCubic 基函数计算得到待插值像素周围 16 个像素的权重，然后将 16 个像素加权平均就可以得到最终的待插值像素

