# Memcached

> 免费 开源 高性能 分布式内存对象缓存系统

## 设计理念

- 简单KV存储

服务器不关心数据结构 需要程序前序列化再存储到服务器

- 一半一半

缓存逻辑一半在客户端 一半在服务器

客户端知道找哪台服务器读写 服务器知道如何存储item 如何淘汰内存

- 简单的集群

集群服务器之间无法通信 没有同步 没有广播 没有复制

- O(1)

所有命令操作很快 并且是锁友好的

- 过期是常态

memcached 是一种LRU缓存

- 缓存失效

客户端对集群服务器的操作时按需访问 而非直接向所有服务器广播

## 硬件需求

低CPU需求：默认使用4条工作线程 大多时候只需要一条缓存线程

内存需求：内存越多越好 集群节点内存大小最好一致 方便扩容缩容时不考虑权重问题

- 避免内存交换
- 是否为高速内存不重要

网络需求：

取决于实际使用情况 如果具有非常高的带宽 使用多个memcached比较好

### 硬件布局

- 缓存web服务器
- 缓存数据库 不是好主意 应该将内存留给数据库的索引优化
- 使用专用的服务器 好处是专用 扩展方便

### 容量规划

搭建集群前容量规划好 运行期扩展十分困难
