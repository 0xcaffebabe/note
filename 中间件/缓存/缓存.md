# 缓存

## 为什么要使用缓存

缓存最终的目的是为减轻服务端压力，减少网络传输请求

## 缓存的分类

### 客户端缓存
- 页面缓存
- 浏览器缓存
- App客户端缓存	

### 网络缓存

- 代理缓存
- CDN缓存

### 服务器缓存

- 数据库缓存
- 平台缓存级缓存

## 缓存雪崩

设置缓存时采用了相同的过期时间，导致缓存在某一时刻同时失效，请求全部转发到DB，DB瞬时压力过重雪崩

### 解决方案

- 锁
  - 比如对某个key只允许一个线程数据库查询数据和写缓存，其他线程等待
  - 但是这样就只能限制同一时间只能有一个线程访问数据库，吞吐量还是不行
- 消息中间件
  - 
- 使用多级缓存
- 分析用户的行为，尽量让缓存失效的时间均匀分布