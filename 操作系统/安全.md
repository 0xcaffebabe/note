# 安全

## 环境与安全

- 威胁

目标                              | 威胁
------------------------------- | ----
数据机密性：数据持有者可指定谁可以获取数据，系统会强制执行规则 | 数据暴露
数据完整性：改动数据应该需要得到许可              | 数据篡改
系统可用性：没有人可以扰乱系统使之瘫痪             | 拒绝服务

- 入侵者

## 操作系统安全

- 被动攻击：窃取信息
- 主动攻击：使程序行为异常

### 可信系统

现代操作系统复杂的功能决定了必然不存在某种方式来确保绝对安全

#### 可信计算基（TCB）

实施安全规则所必须的硬件和软件

![屏幕截图 2020-12-05 163948](/assets/屏幕截图%202020-12-05%20163948.png)

通过访问监视器，接收所有系统请求 由其决定是否运行

必须包含在TCB的功能：

- 进程创建
- 进程切换
- 内存页面管理
- 文件和IO管理

## 保护机制

制订可以做的事情，描述系统哪些资源需要保护

## 保护域

系统中有许多对象，域就是（对象，权限）对的集合

进程会在某个域中运行 可以获得对象的权限，需要时，可以切换域，这样对象的权限也会发生改变

![屏幕截图 2020-12-05 165044](/assets/屏幕截图%202020-12-05%20165044.png)

满足**最小权限原则**，安全性将达到最好

### 保护矩阵

系统可以通过**保护矩阵**来跟踪确定对象属于哪个域

![屏幕截图 2020-12-05 165250](/assets/屏幕截图%202020-12-05%20165250.png)

### 访问控制列表（ACL）

对于稀疏的对象权限，矩阵会浪费大量空间，使用ACL：

![屏幕截图 2020-12-05 170213](/assets/屏幕截图%202020-12-05%20170213.png)

ACL也不仅可以只对用户授权 也可以对用户组进行授权：

UID,GID：permissions;

同时，可以引入通配符来使用户可以访问与当前登录组无关的情况

也可以使用另外一种方式来管理用户和用户组：

File：UID1:RW;UID2:RWX

通过ACL 可以很方便对用户进行赋权收权

### 权能字

![屏幕截图 2020-12-05 171408](/assets/屏幕截图%202020-12-05%20171408.png)

防止权能字被修改：

1. 内存字必须拥有额外的位来判断是否包含权限字
2. 在操作系统保存权能字列表
3. 在用户空间对权能字加密管理

相对来说 权能字效率较高 ACL需要进行搜索操作

## 安全系统的形式化模型

### 多级安全

强制性的访问控制：确保系统的安全策略被强制执行

- Bell-LaPadula模型：保证数据不会从高一级泄漏到低一级
  - 简易安全规则：密级为k的进程只能读取同一密级或者更低密级的对象
  - *规则：密级为k的进程只能写同一密级或者更高密级的对象

![屏幕截图 2020-12-08 184525](/assets/屏幕截图%202020-12-08%20184525.png)

实现：为用户分配安全级别，shell获取级别，该安全级别随着shell创建的所有子进程继承下去

- Biba模型
  - 简单完整性规则：只能写同一等级或者更低等级
  - 完整性 * 规则：只能读同一等级或者更高等级

### 隐蔽信道

也称为边信道 指应用程序可以通过各种精巧的信道，如CPU使用率 声音等来向外传输信息

隐写术：通过利用某些文件的编码，将信息编入文件，从而携带出去

### 可信平台模块

TPM:硬件加解密模块

## 认证

- 弱密码
  - 战争拨号器与IP端口扫描

- UNIX密码安全性

UNIX通过对密码加盐的方式抵御大部分外部攻击

- 一次性密码

单向散列链：通过初始化对一个密码进行n轮散列运算，第i次登陆的密码散列就是n-i+1次散列运算结果

- 挑战-响应认证

通过为用户选择一种运算，服务器传递给用户一串参数，用户运算后回传相关结果来进行认证。运算方式可以经常发生变化

### 物理识别

- 磁条卡
  - 此条可以写入140字节的数据
- 芯片卡
  - 储值卡：有ROM，可以存储数据
  - 智能卡：携带微型处理器，可以进行运算

### 生物识别

注册部分：提取用户特征后进行存储

识别部分：比对登录用户特征与存储的用户特征

- 虹膜识别
- 声音测定

# 软件漏洞

**红皇后效应**

- 缓冲区溢出攻击

  - 栈金丝雀保护
  - 避免栈金丝雀
  - 代码重用攻击
  - 地址空间布局随机化
  - 非控制流转向攻击

- 格式化字符串攻击
- 悬垂指针
- 空指针简介引用攻击
- 整数溢出攻击
- 命令注入攻击
- 检查时间/使用时间攻击

# 内部攻击
- 逻辑炸弹
- 后门陷阱
- 登陆欺骗

# 恶意软件
- 特洛伊木马
- 病毒

# 防御
- 防火墙
