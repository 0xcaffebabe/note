# 文件管理
[toc]
## 文件
### 文件命名
*FAT-16*
*NTFS*
### 文件结构
- 字节序列
- 记录序列
- 树
### 文件类型
### 文件访问
- 顺序访问
- 随机访问
### 文件属性
![enter image description here](https://images2015.cnblogs.com/blog/381412/201601/381412-20160123234117062-757204328.jpg)
### 文件操作
- onCreate
- delete
- open
- close
- read
- write
- append
- seek
- get attrs
- set attrs
- rename
### 使用文件系统调用
一个简单的C语言程序：
```c
int main(){

        FILE *fp;
        char c = -1;
        fp = fopen("./file.c","r");
        while ((c = fgetc(fp)) != -1){
                putchar(c);
        }
        fclose(fp);

        return 0;
}
```
## 目录
- 一级目录系统
在一个目录总包含所有的文件
- 层次目录系统
- 路径名
- 目录操作
    - create
    - delete
    - opendir
    - closedir
    - readdir
    - rename
    - link
    - unlink
## 文件系统的实现
### 文件系统布局
**主引导记录（MBR）**
![enter image description here](https://pic3.zhimg.com/80/v2-76dc2f67640adbbc3a34cdd72c02180a_hd.jpg)
### 文件的实现
- 连续分配
- 链表分配
    使用内存中的表进行链表分配
    **文件分配表**
- i节点
### 目录的实现
### 共享文件
**链接**
**符号链接**
### 日志结构文件系统（LFS）
### 日志文件系统
日志必须是幂等的
*思考：与数据库中的原子事务*
### 虚拟文件系统
*思考：适配器设计模式*
## 文件系统管理和优化
- 磁盘空间管理
    - 选择块大小
    速度与空间不可兼得
    - 记录空闲块
    链表与位图
    - 磁盘配额
- 文件系统备份
**逻辑转储与物理转储**


    


