{"name":"æ–‡ä»¶ç®¡ç†","id":"æ“ä½œç³»ç»Ÿ-æ–‡ä»¶ç®¡ç†","content":"# æ–‡ä»¶ç³»ç»Ÿ\n\n> 1. æ–‡ä»¶ç³»ç»Ÿ**æœ¬è´¨ä¸Šè§£å†³äº†ä»€ä¹ˆé—®é¢˜**ï¼Ÿ\n> 2. ä¸ºä»€ä¹ˆæ–‡ä»¶ç³»ç»Ÿå¿…é¡»ä»¥ä»Šå¤©è¿™ç§æ–¹å¼å­˜åœ¨ï¼Ÿ\n> 3. å„ç±»å…·ä½“å®ç°ï¼ˆFATã€inodeã€æ—¥å¿—ã€VFSï¼‰åœ¨æ•´ä½“æ¶æ„ä¸­çš„**ä½ç½®ä¸è§’è‰²**æ˜¯ä»€ä¹ˆï¼Ÿ\n\n---\n\n## ä¸€ã€æ–‡ä»¶ç³»ç»Ÿçš„ç¬¬ä¸€æ€§åŸç†\n\n### 1.1 æ–‡ä»¶ç³»ç»Ÿè¦è§£å†³çš„æ ¹æœ¬é—®é¢˜\n\nä»æŠ½è±¡è§’åº¦çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿå¹¶ä¸æ˜¯â€œå­˜æ–‡ä»¶â€ï¼Œè€Œæ˜¯ä¸ºè®¡ç®—æœºç³»ç»Ÿæä¾›ä¸€ç§**å¯æŒç»­ã€å¯å¹¶å‘ã€å¯æ²»ç†çš„çŠ¶æ€ç®¡ç†æœºåˆ¶**ã€‚\n\nå…¶æ ¸å¿ƒç›®æ ‡å¯ä»¥å½’çº³ä¸ºä¸‰ç‚¹ï¼š\n\n1. **æŒä¹…æ€§ï¼ˆPersistenceï¼‰**\n   ç¨‹åºç»“æŸåï¼Œä¿¡æ¯ä»ç„¶å­˜åœ¨\n2. **å¯å‘½åæ€§ï¼ˆNamingï¼‰**\n   äººä¸ç¨‹åºå¯ä»¥é€šè¿‡ç¨³å®šæ ‡è¯†è®¿é—®æ•°æ®\n3. **å¯å¹¶å‘æ€§ï¼ˆConcurrency & Isolationï¼‰**\n   å¤šè¿›ç¨‹å®‰å…¨ã€å—æ§åœ°å…±äº«æ•°æ®\n\n> æ–‡ä»¶ç³»ç»Ÿ = å¯¹â€œé•¿æœŸçŠ¶æ€â€çš„åˆ¶åº¦åŒ–ç®¡ç†\n\n---\n\n### 1.2 æŠ½è±¡åˆ†å±‚ï¼šä»ç‰©ç†åˆ°è¯­ä¹‰\n\næ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒä»·å€¼ï¼Œåœ¨äº**éš”ç¦»å˜åŒ–æœ€å¿«çš„å±‚**ï¼ˆç¡¬ä»¶ï¼‰ï¼Œå¹¶å‘ä¸Šæä¾›ç¨³å®šè¯­ä¹‰ã€‚\n\n```text\nåº”ç”¨ç¨‹åº\n   â†“  ç»Ÿä¸€è¯­ä¹‰ï¼ˆopen / read / writeï¼‰\nè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰ â€”â€” å‘½åã€æƒé™ã€å¯¹è±¡æ¨¡å‹\n   â†“  æ–‡ä»¶ç³»ç»Ÿå®ç°ï¼ˆext4 / NTFS / FAT / LFSï¼‰\nå—è®¾å¤‡æŠ½è±¡\n   â†“\nç‰©ç†å­˜å‚¨ä»‹è´¨\n```\n\nè¿™æ˜¯ä¸€ç§å…¸å‹çš„ï¼š\n\n* **é¢å‘æ¥å£ç¼–ç¨‹**\n* **é€‚é…å™¨æ¨¡å¼**\n* **å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSoCï¼‰**\n\n---\n\n## äºŒã€æ–‡ä»¶è¿™ä¸€æŠ½è±¡å¯¹è±¡\n\n### 2.1 æ–‡ä»¶ä¸æ˜¯â€œæ•°æ®å—â€\n\n**æ–‡ä»¶ = æ•°æ® + å…ƒæ•°æ® + è®¿é—®è¯­ä¹‰**\n\næ–‡ä»¶ç³»ç»Ÿå…³æ³¨çš„æ ¸å¿ƒå¹¶éæ•°æ®å†…å®¹ï¼Œè€Œæ˜¯ï¼š\n\n* å¦‚ä½•å®šä½æ•°æ®\n* è°å¯ä»¥è®¿é—®\n* å¦‚ä½•å¹¶å‘\n* å¦‚ä½•æ¢å¤\n\n---\n\n### 2.2 æ–‡ä»¶çš„ä¸‰ç§ç»å…¸é€»è¾‘æ¨¡å‹\n\n| æ¨¡å‹   | æŠ½è±¡å±‚çº§ | è®¾è®¡åŠ¨æœº      |\n| ---- | ---- | --------- |\n| å­—èŠ‚åºåˆ— | æœ€é€šç”¨  | å¯¹åº”ç”¨æœ€å‹å¥½    |\n| è®°å½•åºåˆ— | ç»“æ„åŒ–  | é¢å‘æ•°æ®åº“ä¸æ‰¹å¤„ç† |\n| æ ‘ç»“æ„  | è¯­ä¹‰åŒ–  | ç›´æ¥æ”¯æŒå±‚çº§å…³ç³»  |\n\nè¿™äº›æ¨¡å‹åæ˜ çš„æ˜¯ï¼š**æ–‡ä»¶ç³»ç»Ÿæ˜¯å¦ç†è§£æ•°æ®ç»“æ„**ã€‚\n\n---\n\n### 2.3 æ–‡ä»¶å±æ€§çš„æœ¬è´¨\n\næ–‡ä»¶å±æ€§å¹¶éâ€œé™„åŠ ä¿¡æ¯â€ï¼Œè€Œæ˜¯æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ²»ç†çš„**åˆ¶åº¦åŸºç¡€**ï¼š\n\n* æƒé™ â†’ å®‰å…¨æ¨¡å‹\n* æ—¶é—´ â†’ ä¸€è‡´æ€§ä¸å®¡è®¡\n* å¤§å° / ä½ç½® â†’ ç©ºé—´ç®¡ç†\n\n> inode çš„æœ¬è´¨ï¼Œæ˜¯**æ–‡ä»¶çš„åˆ¶åº¦æ€§èº«ä»½è¯**ã€‚\n\n---\n\n## ä¸‰ã€ç›®å½•ï¼šå‘½åç©ºé—´çš„å®ç°\n\n### 3.1 ç›®å½•ä¸æ˜¯å®¹å™¨ï¼Œè€Œæ˜¯æ˜ å°„\n\n**ç›®å½• = åç§° â†’ æ–‡ä»¶å¯¹è±¡ï¼ˆinodeï¼‰ çš„æ˜ å°„è¡¨**\n\n* ç›®å½•ç»“æ„ â‰  æ–‡ä»¶ç‰©ç†ä½ç½®\n* è·¯å¾„ = ä¸€ç§å‘½åè§£æç®—æ³•\n\n---\n\n### 3.2 å‘½åç³»ç»Ÿçš„æ¼”è¿›\n\n| æ–¹æ¡ˆ   | ç‰¹ç‚¹  | é€‚ç”¨åœºæ™¯   |\n| ---- | --- | ------ |\n| å•çº§ç›®å½• | ç®€å•  | åµŒå…¥å¼ç³»ç»Ÿ  |\n| å±‚æ¬¡ç›®å½• | å¯æ‰©å±• | é€šç”¨æ“ä½œç³»ç»Ÿ |\n\nå·¥ä½œç›®å½•çš„æœ¬è´¨ï¼š\n\n> ä¸€ä¸ªè¿›ç¨‹æŒæœ‰çš„**å‘½åä¸Šä¸‹æ–‡çŠ¶æ€**\n\n---\n\n## å››ã€ç©ºé—´ç®¡ç†ï¼šä»è¿ç»­åˆ°ç¦»æ•£\n\n### 4.1 ç©ºé—´åˆ†é…çš„æ ¸å¿ƒçŸ›ç›¾\n\n> **æ€§èƒ½ vs çµæ´»æ€§**\n\n| åˆ†é…æ–¹å¼  | ä¼˜ç‚¹  | æœ¬è´¨ç¼ºé™·  |\n| ----- | --- | ----- |\n| è¿ç»­åˆ†é…  | è®¿é—®å¿« | æ— æ³•æ‰©å±•  |\n| é“¾è¡¨åˆ†é…  | çµæ´»  | éšæœºè®¿é—®å·® |\n| FAT   | æŸ¥æ‰¾å¿« | å†…å­˜å‹åŠ›  |\n| inode | å¯æ‰©å±• | ç»“æ„å¤æ‚  |\n\ninode çš„è®¾è®¡å“²å­¦ï¼š\n\n> ç”¨**é—´æ¥å±‚**æ¢å–ç³»ç»Ÿå¯æŒç»­æ¼”è¿›èƒ½åŠ›\n\n---\n\n## äº”ã€ä¸€è‡´æ€§ä¸æ¢å¤ï¼šä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—\n\n### 5.1 æ–‡ä»¶ç³»ç»Ÿä¸ºä½•å¤©ç„¶ä¸å®‰å…¨\n\næ–‡ä»¶æ“ä½œç”±å¤šä¸ªéåŸå­æ­¥éª¤ç»„æˆï¼š\n\n* å†™æ•°æ®å—\n* æ›´æ–°å…ƒæ•°æ®\n* ä¿®æ”¹ä½å›¾\n\næ–­ç”µæ„å‘³ç€ï¼š\n\n> **ä¸–ç•Œå¤„äºä¸­é—´æ€**\n\n---\n\n### 5.2 ä¸¤ç§æ¢å¤å“²å­¦\n\n| æ–¹æ¡ˆ         | æ€æƒ³    | ä»£ä»·  |\n| ---------- | ----- | --- |\n| FSCK       | äº‹åä¿®å¤  | å¯åŠ¨æ…¢ |\n| Journaling | å…ˆè®°å½•æ„å›¾ | å†™æ”¾å¤§ |\n\næ—¥å¿—æ–‡ä»¶ç³»ç»Ÿçš„æœ¬è´¨ï¼š\n\n> **æŠŠæ–‡ä»¶ç³»ç»Ÿå˜æˆä¸€ä¸ªå¼±äº‹åŠ¡ç³»ç»Ÿ**\n\nä¸æ•°æ®åº“çš„å…±æ€§ï¼š\n\n* redo log\n* åŸå­æ€§\n* å¹‚ç­‰æ€§\n\n---\n\n## å…­ã€æ€§èƒ½ä¼˜åŒ–ï¼šä¸ç‰©ç†ä¸–ç•Œåšå¼ˆ\n\n### 6.1 æ€§èƒ½ç“¶é¢ˆçš„æ ¹æº\n\n* CPU â‰« å†…å­˜ â‰« ç£ç›˜\n* ç£ç›˜ = é«˜å»¶è¿Ÿè®¾å¤‡\n\næ–‡ä»¶ç³»ç»Ÿçš„ä¼˜åŒ–ï¼Œæœ¬è´¨æ˜¯åœ¨**æ—¶é—´ä¸Šæ¬ºéª—ç‰©ç†ç°å®**ã€‚\n\n---\n\n### 6.2 å…³é”®ä¼˜åŒ–ç­–ç•¥\n\n* é«˜é€Ÿç¼“å­˜ï¼šç”¨ç©ºé—´æ¢æ—¶é—´\n* é¢„è¯»ï¼šåˆ©ç”¨å±€éƒ¨æ€§å‡è®¾\n* ç¢ç‰‡æ•´ç†ï¼šå‡å°‘å¯»é“æˆæœ¬\n\nè¿™äº›ç­–ç•¥çš„å…±æ€§ï¼š\n\n> **ç”¨æ¦‚ç‡ä¸ç»Ÿè®¡å¯¹æŠ—ç‰©ç†é™åˆ¶**\n\n---\n\n## ä¸ƒã€VFSï¼šç³»ç»Ÿçº§æŠ½è±¡çš„èƒœåˆ©\n\n### 7.1 ä¸ºä»€ä¹ˆéœ€è¦ VFS\n\nå¦‚æœæ²¡æœ‰ VFSï¼š\n\n* æ¯ç§æ–‡ä»¶ç³»ç»Ÿæš´éœ²ä¸åŒæ¥å£\n* åº”ç”¨ç¨‹åºä¸å¯ç§»æ¤\n\nVFS çš„è§’è‰²ï¼š\n\n> åœ¨â€œå˜åŒ–æœ€å¿«çš„å®ç°â€å’Œâ€œæœ€ç¨³å®šçš„åº”ç”¨â€ä¹‹é—´å»ºç«‹ç¼“å†²å±‚\n\n---\n\n### 7.2 æ¶æ„æ€æƒ³\n\n* é¢å‘æ¥å£è€Œéå®ç°\n* é€‚é…å™¨æ¨¡å¼\n* æ§åˆ¶åè½¬\n\nVFS æ˜¯æ“ä½œç³»ç»Ÿä¸­ï¼š\n\n> **æŠ½è±¡èƒ½åŠ›æœ€å¼ºã€å·¥ç¨‹ä»·å€¼æœ€é«˜çš„æ¨¡å—ä¹‹ä¸€**\n\n---\n\n## å…«ã€æ¼”è¿›è§†è§’ï¼šæ–‡ä»¶ç³»ç»Ÿä¸æ˜¯ç»ˆç‚¹\n\n### 8.1 è®¾è®¡æ¼”è¿›ä¸»çº¿\n\n```text\nè¿ç»­åˆ†é…\n â†’ FAT\n â†’ inode\n â†’ æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ\n â†’ LFS\n â†’ åˆ†å¸ƒå¼ / å¯¹è±¡å­˜å‚¨\n```\n\nå˜åŒ–çš„ä¸æ˜¯ç›®æ ‡ï¼Œè€Œæ˜¯ï¼š\n\n* ç¡¬ä»¶ç‰¹æ€§\n* è§„æ¨¡å‡è®¾\n* æ•…éšœæ¨¡å‹\n\n---\n\n### 8.2 æ ¸å¿ƒæƒè¡¡ä¸å˜\n\n* æ€§èƒ½ vs ä¸€è‡´æ€§\n* ç®€å•æ€§ vs æ‰©å±•æ€§\n* é€šç”¨æ€§ vs ä¸“ç”¨ä¼˜åŒ–\n\n> æŠ€æœ¯ä¼šå˜ï¼Œä½†æƒè¡¡æ°¸æ’ã€‚\n\n---\n\n## ä¹ã€èƒ½åŠ›æ ‘æ€»ç»“ï¼ˆç¨³å®šè®¤çŸ¥ï¼‰\n\n```text\næ–‡ä»¶ç³»ç»Ÿæ ¸å¿ƒèƒ½åŠ›\nâ”œâ”€ å‘½åèƒ½åŠ›ï¼ˆè·¯å¾„ã€ç›®å½•ï¼‰\nâ”œâ”€ å­˜å‚¨èƒ½åŠ›ï¼ˆå—ç®¡ç†ã€åˆ†é…ï¼‰\nâ”œâ”€ è®¿é—®èƒ½åŠ›ï¼ˆé¡ºåº / éšæœºï¼‰\nâ”œâ”€ ä¿æŠ¤èƒ½åŠ›ï¼ˆæƒé™ã€é”ï¼‰\nâ”œâ”€ ä¸€è‡´æ€§èƒ½åŠ›ï¼ˆæ—¥å¿—ã€æ¢å¤ï¼‰\nâ”œâ”€ æ‰©å±•èƒ½åŠ›ï¼ˆVFSï¼‰\nâ””â”€ æ€§èƒ½èƒ½åŠ›ï¼ˆç¼“å­˜ã€é¢„è¯»ï¼‰\n```\n\n## å…³è”å†…å®¹ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n\n- [/æ“ä½œç³»ç»Ÿ/æ“ä½œç³»ç»Ÿ.md](/æ“ä½œç³»ç»Ÿ/æ“ä½œç³»ç»Ÿ.md) æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µä¸æ•´ä½“æ¶æ„ï¼Œä¸æ–‡ä»¶ç³»ç»Ÿä½œä¸ºOSæ ¸å¿ƒç»„ä»¶çš„åœ°ä½å¯†åˆ‡ç›¸å…³\n- [/æ“ä½œç³»ç»Ÿ/linux/Linux.md](/æ“ä½œç³»ç»Ÿ/linux/Linux.md) Linuxç³»ç»Ÿä¸­çš„æ–‡ä»¶ç³»ç»Ÿå®ç°ä¸ç®¡ç†ï¼ŒåŒ…å«extç³»åˆ—æ–‡ä»¶ç³»ç»Ÿçš„å…·ä½“å®ç°\n- [/æ“ä½œç³»ç»Ÿ/linux/å†…æ ¸.md](/æ“ä½œç³»ç»Ÿ/linux/å†…æ ¸.md) Linuxå†…æ ¸ä¸­çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰å®ç°ï¼Œä¸æœ¬æ–‡ä¸­VFSæŠ½è±¡æ¦‚å¿µç›´æ¥ç›¸å…³\n- [/æ“ä½œç³»ç»Ÿ/å†…å­˜ç®¡ç†.md](/æ“ä½œç³»ç»Ÿ/å†…å­˜ç®¡ç†.md) å†…å­˜ç®¡ç†ä¸æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ã€é¡µé¢ç¼“å­˜ç­‰æœºåˆ¶çš„ååŒå·¥ä½œåŸç†\n- [/æ“ä½œç³»ç»Ÿ/è¾“å…¥è¾“å‡º.md](/æ“ä½œç³»ç»Ÿ/è¾“å…¥è¾“å‡º.md) I/Oç³»ç»Ÿä¸æ–‡ä»¶ç³»ç»Ÿçš„äº¤äº’ï¼ŒåŒ…æ‹¬ç£ç›˜è°ƒåº¦ç®—æ³•ä¸æ–‡ä»¶è®¿é—®æ€§èƒ½ä¼˜åŒ–\n- [/ä¸­é—´ä»¶/æ•°æ®åº“/æ•°æ®åº“.md](/ä¸­é—´ä»¶/æ•°æ®åº“/æ•°æ®åº“.md) æ•°æ®åº“ç³»ç»Ÿä¸æ–‡ä»¶ç³»ç»Ÿçš„å…³ç³»ï¼Œæ•°æ®åº“å¦‚ä½•åˆ©ç”¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ•°æ®æŒä¹…åŒ–\n- [/ä¸­é—´ä»¶/æ•°æ®åº“/æ•°æ®åº“ç³»ç»Ÿ/äº‹åŠ¡ç®¡ç†/äº‹åŠ¡.md](/ä¸­é—´ä»¶/æ•°æ®åº“/æ•°æ®åº“ç³»ç»Ÿ/äº‹åŠ¡ç®¡ç†/äº‹åŠ¡.md) äº‹åŠ¡çš„æŒä¹…æ€§æ¦‚å¿µä¸æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–æœºåˆ¶çš„å…³è”\n- [/æ•°æ®æŠ€æœ¯/æ•°æ®å­˜å‚¨.md](/æ•°æ®æŠ€æœ¯/æ•°æ®å­˜å‚¨.md) æ›´å¹¿æ³›çš„æ•°æ®å­˜å‚¨æ¦‚å¿µï¼Œä¸æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨åŸç†å½¢æˆå¯¹æ¯”å’Œè¡¥å……\n- [/è®¡ç®—æœºç½‘ç»œ/äº‘è®¡ç®—.md](/è®¡ç®—æœºç½‘ç»œ/äº‘è®¡ç®—.md) äº‘ç¯å¢ƒä¸‹çš„å­˜å‚¨è™šæ‹ŸåŒ–ä¸åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ¦‚å¿µ\n- [/æ“ä½œç³»ç»Ÿ/è™šæ‹ŸåŒ–.md](/æ“ä½œç³»ç»Ÿ/è™šæ‹ŸåŒ–.md) è™šæ‹ŸåŒ–ç¯å¢ƒä¸­çš„æ–‡ä»¶ç³»ç»Ÿä¸å­˜å‚¨ç®¡ç†ï¼ŒåŒ…æ‹¬è™šæ‹Ÿç£ç›˜æ¦‚å¿µ\n","metadata":"tags: ['æ“ä½œç³»ç»Ÿ']","hasMoreCommit":true,"totalCommits":18,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: æ•´ç†æ ‡ç­¾","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2026-01-05T17:39:56+08:00","author":"MY","message":"docs(file-system): é‡æ„æ–‡ä»¶ç³»ç»Ÿæ–‡æ¡£ç»“æ„ä¼˜åŒ–å†…å®¹ç»„ç»‡","hash":"d28465567b4e8f2114678cbc2beddfe63ac52f4c"},{"date":"2026-01-05T15:52:06+08:00","author":"MY","message":"docs(file-system): æ›´æ–°æ–‡ä»¶ç®¡ç†ç³»ç»Ÿæ–‡æ¡£å¹¶æ·»åŠ ç›¸å…³å›¾ç‰‡èµ„æº","hash":"6200e8831906ce5b801bd99aafa83684296e4cff"},{"date":"2024-11-13T19:11:32+08:00","author":"MY","message":"ğŸ“¦æ“ä½œç³»ç»Ÿ","hash":"e61620c72f4b61f38fd4124dcae670b77ff2f358"},{"date":"2022-07-10T15:08:09+08:00","author":"MY","message":"âœï¸æ›´æ–° æ“ä½œç³»ç»Ÿ","hash":"96cd8f3752fc76a06e935a9069dcf2c6a322d797"},{"date":"2022-05-01T15:42:08+08:00","author":"MY","message":"âœï¸æ›´æ–° æ–‡ä»¶ç®¡ç†","hash":"ec9275ab0e47022afe3ecfa3c2cd546879dfc7f4"},{"date":"2022-04-28T23:35:20+08:00","author":"MY","message":"âœï¸æ›´æ–° æ–‡ä»¶ç®¡ç†","hash":"80c87cad8d41117e99623d9e8daa920f619abeb5"},{"date":"2021-12-28T16:52:23+08:00","author":"cjiping","message":"âœï¸æ›´æ–° æ“ä½œç³»ç»Ÿ æ–‡ä»¶ç®¡ç†","hash":"ba0206a7df417415d84fc998bd1eb0ec9f57803f"},{"date":"2021-01-21T19:03:09+08:00","author":"cjiping","message":"âœæ›´æ–° æ“ä½œç³»ç»Ÿ æ–‡ä»¶ç®¡ç†","hash":"6fecaaf2e91a452ca0df8cf3156eed19bd6b123c"},{"date":"2020-07-31T15:57:14+08:00","author":"MY","message":"âœæ›´æ–° æ“ä½œç³»ç»Ÿæ–‡ä»¶ç®¡ç†","hash":"c5c4800dd7569de11e22b99d1ce77c44ab9ade54"}],"createTime":"2019-06-09T23:18:10+08:00"}