{"name":"åƒåœ¾å›æ”¶","id":"ç¼–ç¨‹è¯­è¨€-JAVA-JVM-è‡ªåŠ¨å†…å­˜ç®¡ç†-åƒåœ¾å›æ”¶","content":"# JVM åƒåœ¾å›æ”¶ï¼ˆGCï¼‰\n\n## ä¸€ã€ç¬¬ä¸€æ€§åŸç†å±‚ï¼ˆWhyï¼‰\n\n### 1. ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶\n\n**æ ¹æœ¬é—®é¢˜**ï¼š\n\n> ç¨‹åºå¦‚ä½•åˆ¤æ–­ä¸€å—å†…å­˜æ˜¯å¦è¿˜â€œæœ‰ä»·å€¼â€ï¼Ÿ\n\nåœ¨ç°ä»£é«˜çº§è¯­è¨€ä¸­ï¼š\n\n* å¯¹è±¡çš„**ä½¿ç”¨æƒ**ç”±ç¨‹åºé€»è¾‘å†³å®š\n* å¯¹è±¡çš„**ç”Ÿå‘½å‘¨æœŸ**å´éš¾ä»¥ç”±ç¨‹åºå‘˜ç²¾ç¡®ç®¡ç†\n\nå¦‚æœå®Œå…¨ä¾èµ–äººå·¥é‡Šæ”¾ï¼š\n\n* æ˜“äº§ç”Ÿæ‚¬æŒ‚æŒ‡é’ˆã€é‡å¤é‡Šæ”¾\n* éš¾ä»¥åº”å¯¹å¼‚å¸¸ã€å¹¶å‘ã€å¤æ‚æ§åˆ¶æµ\n\n**ç»“è®º**ï¼š\n\n> åƒåœ¾å›æ”¶çš„æœ¬è´¨ï¼Œæ˜¯æŠŠâ€œå†…å­˜ç”Ÿå‘½å‘¨æœŸç®¡ç†â€ä»ä¸šåŠ¡é€»è¾‘ä¸­å‰¥ç¦»ï¼Œäº¤ç”±è¿è¡Œæ—¶ç³»ç»Ÿç»Ÿä¸€æ²»ç†ã€‚\n\n---\n\n### 2. GC çš„æœ¬è´¨å®šä¹‰\n\næ— è®ºå®ç°å¦‚ä½•å˜åŒ–ï¼Œæ‰€æœ‰ GC éƒ½åœ¨è§£å†³åŒä¸€ä¸ªé—®é¢˜ï¼š\n\n> **åœ¨ä¸ç ´åç¨‹åºè¯­ä¹‰çš„å‰æä¸‹ï¼Œæ‰¾å‡ºä»ç„¶å¯èƒ½è¢«ä½¿ç”¨çš„å¯¹è±¡ï¼Œå…¶ä½™å†…å­˜å¯ä»¥è¢«å®‰å…¨é‡ç”¨ã€‚**\n\næŠ½è±¡ä¸ºä¸¤ä¸ªä¸å¯åˆ†å‰²çš„å­é—®é¢˜ï¼š\n\n1. **å­˜æ´»å¯¹è±¡å‘ç°ï¼ˆLive Object Discoveryï¼‰**\n2. **å†…å­˜ç©ºé—´é‡ç”¨ï¼ˆSpace Reclamation & Reuseï¼‰**\n\n---\n\n## äºŒã€ç†è®ºæ¨¡å‹å±‚ï¼ˆWhatï¼‰\n\n### 3. å¯¹è±¡â€œæ˜¯å¦å­˜æ´»â€çš„ç†è®ºåˆ¤å®š\n\n#### 3.1 å¼•ç”¨è®¡æ•°æ¨¡å‹ï¼ˆè¢«å¦å®šçš„æ–¹æ¡ˆï¼‰\n\n**æ€æƒ³**ï¼š\n\n* æ¯ä¸ªå¯¹è±¡ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°\n\n**è¢«å¦å®šçš„æ ¹æœ¬åŸå› **ï¼š\n\n* æ— æ³•å¤„ç†**å¾ªç¯å¼•ç”¨**\n* åœ¨çœŸå®è¯­è¨€è¯­ä¹‰ä¸­éœ€è¦å¤§é‡é¢å¤–ä¿®æ­£\n\n> JVM æ”¾å¼ƒè¯¥æ–¹æ¡ˆï¼Œå¹¶éæ€§èƒ½é—®é¢˜ï¼Œè€Œæ˜¯**æ­£ç¡®æ€§éš¾ä»¥ä¿è¯**ã€‚\n\n---\n\n#### 3.2 å¯è¾¾æ€§åˆ†ææ¨¡å‹ï¼ˆGC çš„ç†è®ºåŸºçŸ³ï¼‰\n\n**æ ¸å¿ƒæ€æƒ³**ï¼š\n\n> å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œä¸å–å†³äºâ€œè¢«å¼•ç”¨æ¬¡æ•°â€ï¼Œè€Œå–å†³äºæ˜¯å¦**ä»å¯è¢«ç¨‹åºè®¿é—®**ã€‚\n\næ¨¡å‹å®šä¹‰ï¼š\n\n* ä»ä¸€ç»„ **GC Roots** å‡ºå‘\n* æ²¿ç€å¼•ç”¨å…³ç³»éå†å¯¹è±¡å›¾\n* èƒ½åˆ°è¾¾çš„å¯¹è±¡ = å­˜æ´»å¯¹è±¡\n\n**è¿™æ˜¯ JVM GC çš„ç¬¬ä¸€æ€§ç†è®ºåŸºç¡€ã€‚**\n\n---\n\n### 4. GC Roots çš„å“²å­¦å«ä¹‰\n\nGC Roots ä¸æ˜¯éšæ„é€‰æ‹©ï¼Œè€Œæ˜¯æ»¡è¶³ä¸€ä¸ªåŸåˆ™ï¼š\n\n> **åªè¦ç¨‹åºè¿˜èƒ½â€œç›´æ¥ä½¿ç”¨â€çš„å¯¹è±¡ï¼Œå°±å¿…é¡»ä½œä¸ºæ ¹ã€‚**\n\nå› æ­¤åŒ…æ‹¬ï¼š\n\n* çº¿ç¨‹æ ˆä¸­çš„å±€éƒ¨å˜é‡\n* ç±»é™æ€å˜é‡\n* å¸¸é‡æ± å¼•ç”¨\n* JNIã€æœ¬åœ°ä»£ç å¼•ç”¨\n\n---\n\n### 5. å¼•ç”¨å¼ºåº¦æ¨¡å‹ï¼ˆå¯¹è±¡ç”Ÿå­˜ç­–ç•¥ï¼‰\n\nå¼•ç”¨ä¸æ˜¯äºŒå…ƒçš„ï¼ˆæœ‰ / æ— ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ª**ç­–ç•¥æ¢¯åº¦**ï¼š\n\n| å¼•ç”¨ç±»å‹ | æœ¬è´¨å®šä½  | è®¾è®¡ç›®çš„     |\n| ---- | ----- | -------- |\n| å¼ºå¼•ç”¨  | å¿…é¡»å­˜æ´»  | ç¨‹åºæ­£ç¡®æ€§    |\n| è½¯å¼•ç”¨  | å¯ç‰ºç‰²   | å†…å­˜å¼¹æ€§ï¼ˆç¼“å­˜ï¼‰ |\n| å¼±å¼•ç”¨  | ä¸é˜»æ­¢å›æ”¶ | ç”Ÿå‘½å‘¨æœŸç»‘å®š   |\n| è™šå¼•ç”¨  | ä»…åšé€šçŸ¥  | èµ„æºå›æ”¶åè°ƒ   |\n\n> å¼•ç”¨æ¨¡å‹çš„æœ¬è´¨ï¼Œæ˜¯**è®©ç¨‹åºå‚ä¸â€œå†…å­˜ä»·å€¼æ’åºâ€**ã€‚\n\n---\n\n## ä¸‰ã€åˆ†ä»£ä¸å¯¹è±¡è¡Œä¸ºå‡è¯´ï¼ˆWhy + Whatï¼‰\n\n### 6. åˆ†ä»£æ”¶é›†çš„ç†è®ºå‰æ\n\nJVM å¹¶ééšæ„åˆ†ä»£ï¼Œè€Œæ˜¯åŸºäºä¸‰æ¡ç»éªŒå‡è¯´ï¼š\n\n1. **å¼±åˆ†ä»£å‡è¯´**ï¼šç»å¤§å¤šæ•°å¯¹è±¡æœç”Ÿå¤•ç­\n2. **å¼ºåˆ†ä»£å‡è¯´**ï¼šæ´»å¾—è¶Šä¹…çš„å¯¹è±¡è¶Šéš¾æ­»äº¡\n3. **è·¨ä»£å¼•ç”¨å‡è¯´**ï¼šè·¨ä»£å¼•ç”¨è¿œå°‘äºåŒä»£å¼•ç”¨\n\n> GC åˆ†ä»£ä¸æ˜¯ä¼˜åŒ–æŠ€å·§ï¼Œè€Œæ˜¯**å¯¹è±¡è¡Œä¸ºç»Ÿè®¡å­¦**ã€‚\n\n---\n\n### 7. åˆ†ä»£çš„æŠ½è±¡è§’è‰²åˆ’åˆ†\n\n| ä»£   | æœ¬è´¨è§’è‰²  | å›æ”¶ç›®æ ‡ |\n| --- | ----- | ---- |\n| æ–°ç”Ÿä»£ | é«˜æ­»äº¡ç‡åŒº | å¿«é€Ÿå›æ”¶ |\n| è€å¹´ä»£ | é«˜ç¨³å®šåŒº  | å‡å°‘é¢‘ç‡ |\n\nåˆ†ä»£çš„çœŸæ­£ç›®çš„ï¼š\n\n> **ç”¨ä¸åŒç­–ç•¥å¤„ç†ä¸åŒâ€œç”Ÿå­˜æ¦‚ç‡â€çš„å¯¹è±¡ã€‚**\n\n---\n\n## å››ã€æ ¸å¿ƒå›æ”¶ç®—æ³•ï¼ˆHowï¼‰\n\n### 8. ä¸‰å¤§åŸºç¡€ç®—æ³•çš„å“²å­¦æƒè¡¡\n\n#### 8.1 æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰\n\n* ä¼˜ç‚¹ï¼šå®ç°ç®€å•\n* æ ¹æœ¬ç¼ºé™·ï¼š**å†…å­˜ç¢ç‰‡**\n\né€‚ç”¨åœºæ™¯ï¼š\n\n* å¯¹è±¡ç¨³å®š\n* å›æ”¶é¢‘ç‡ä½\n\n---\n\n#### 8.2 æ ‡è®°-å¤åˆ¶ï¼ˆMark-Copyï¼‰\n\n* ä¼˜ç‚¹ï¼šæ— ç¢ç‰‡ã€åˆ†é…å¿«\n* ä»£ä»·ï¼šç‰ºç‰²ç©ºé—´\n\næœ¬è´¨é€‚é…ï¼š\n\n> **é«˜æ­»äº¡ç‡åŒºåŸŸï¼ˆæ–°ç”Ÿä»£ï¼‰**\n\n---\n\n#### 8.3 æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰\n\n* ä¼˜ç‚¹ï¼šç©ºé—´è¿ç»­\n* ä»£ä»·ï¼šå¯¹è±¡ç§»åŠ¨æˆæœ¬\n\nå“²å­¦æƒè¡¡ï¼š\n\n> åœé¡¿æ—¶é—´ vs ååé‡\n\n---\n\n## äº”ã€å¹¶å‘ GC çš„ä¸å˜é‡ä¸å·¥ç¨‹çº¦æŸ\n\n### 9. ä¸ºä»€ä¹ˆå¹¶å‘ GC å¦‚æ­¤å›°éš¾\n\næ ¹æœ¬å†²çªï¼š\n\n> **GC åœ¨â€œçœ‹å¯¹è±¡å›¾â€ï¼Œè€Œç¨‹åºåœ¨â€œæ”¹å¯¹è±¡å›¾â€ã€‚**\n\n---\n\n### 10. ä¸‰è‰²æ ‡è®°ä¸å˜é‡\n\n| é¢œè‰² | å«ä¹‰        |\n| -- | --------- |\n| ç™½  | æœªè®¿é—®ï¼ˆå¯èƒ½åƒåœ¾ï¼‰ |\n| ç°  | å·²è®¿é—®ï¼Œæœªæ‰«æå®Œ  |\n| é»‘  | å·²å®Œå…¨æ‰«æ     |\n\n**å¹¶å‘æ­£ç¡®æ€§çš„æ ¸å¿ƒä¸å˜é‡**ï¼š\n\n> é»‘å¯¹è±¡ä¸èƒ½ç›´æ¥å¼•ç”¨ç™½å¯¹è±¡\n\n---\n\n### 11. ä¸¤å¤§å¹¶å‘ä¿®æ­£æ€æƒ³\n\n| æ€æƒ³         | ä»£è¡¨       | æœ¬è´¨       |\n| ---------- | -------- | -------- |\n| å¢é‡æ›´æ–°       | CMS      | å…³æ³¨â€œæ–°å¢å¼•ç”¨â€ |\n| åŸå§‹å¿«ç…§ï¼ˆSATBï¼‰ | G1 / ZGC | å›ºå®šèµ·å§‹è§†å›¾   |\n\n---\n\n## å…­ã€HotSpot æ¶æ„æ”¯æ’‘æœºåˆ¶ï¼ˆHowï¼‰\n\n### 12. Safepoint / Safe Region\n\n> GC ä¸æ˜¯éšæ—¶å¯åšçš„ï¼Œè€Œå¿…é¡»åœ¨**å¼•ç”¨å…³ç³»ç¨³å®šç‚¹**æ‰§è¡Œã€‚\n\nSafepoint çš„æœ¬è´¨ï¼š\n\n* åœ¨**å¯éªŒè¯ä¸€è‡´æ€§**çš„æ—¶é—´ç‚¹æš‚åœä¸–ç•Œ\n\n---\n\n### 13. OopMap\n\nOopMap è§£å†³çš„é—®é¢˜ä¸æ˜¯â€œå¿«â€ï¼Œè€Œæ˜¯ï¼š\n\n> **å¦‚ä½•åœ¨æš‚åœæ—¶å‡†ç¡®çŸ¥é“å“ªé‡Œæ˜¯å¼•ç”¨ã€‚**\n\n---\n\n### 14. è®°å¿†é›†ä¸å¡è¡¨\n\nè®¾è®¡ç›®æ ‡ï¼š\n\n> **é¿å…å…¨å †æ‰«æè€å¹´ä»£ã€‚**\n\nå¡è¡¨æ˜¯ï¼š\n\n* ç©ºé—´æ¢æ—¶é—´\n* ç²¾åº¦æ¢æ€§èƒ½\n\n---\n\n## ä¸ƒã€åƒåœ¾æ”¶é›†å™¨ = ç­–ç•¥ç»„åˆä½“\n\n### 15. è¡¡é‡ GC çš„ä¸‰å¤§æŒ‡æ ‡\n\n| æŒ‡æ ‡   | å«ä¹‰     |\n| ---- | ------ |\n| ååé‡  | ç¨‹åºæ‰§è¡Œæ•ˆç‡ |\n| å»¶è¿Ÿ   | åœé¡¿æ—¶é—´   |\n| å†…å­˜å ç”¨ | è¿è¡Œæˆæœ¬   |\n\n> GC è®¾è®¡æ˜¯å…¸å‹çš„**ä¸å¯èƒ½ä¸‰è§’é—®é¢˜**ã€‚\n\n---\n\n### 16. å…¸å‹æ”¶é›†å™¨çš„è®¾è®¡å®šä½\n\n| æ”¶é›†å™¨      | æ ¸å¿ƒè¿½æ±‚ | ä»£ä»·    |\n| -------- | ---- | ----- |\n| Serial   | æç®€   | é•¿åœé¡¿   |\n| Parallel | åå   | å»¶è¿Ÿä¸å¯æ§ |\n| CMS      | ä½å»¶è¿Ÿ  | ç¢ç‰‡    |\n| G1       | å¯é¢„æµ‹  | å®ç°å¤æ‚  |\n| ZGC      | æä½å»¶è¿Ÿ | æ¶æ„å¤æ‚  |\n\n---\n\n## å…«ã€ç°ä»£ GC çš„æ¼”è¿›è¶‹åŠ¿\n\n### 17. æ¼”è¿›ä¸»çº¿\n\n> **å¯¹è±¡è§„æ¨¡ â†‘ â†’ å †å®¹é‡ â†‘ â†’ äººç±»å®¹å¿åœé¡¿ â†“**\n\nå› æ­¤ï¼š\n\n* ä» STW â†’ å¹¶å‘\n* ä» åˆ†ä»£ â†’ Region\n* ä» å†™å±éšœ â†’ è¯»å±éšœ\n\n## å…³è”å†…å®¹ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n\n- [/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/è‡ªåŠ¨å†…å­˜ç®¡ç†/å†…å­˜ç»“æ„.md](/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/è‡ªåŠ¨å†…å­˜ç®¡ç†/å†…å­˜ç»“æ„.md) JVMå†…å­˜ç»“æ„ä¸åƒåœ¾å›æ”¶æœºåˆ¶å¯†åˆ‡ç›¸å…³ï¼Œä¸åŒçš„å†…å­˜åŒºåŸŸé‡‡ç”¨ä¸åŒçš„å›æ”¶ç­–ç•¥ï¼Œç†è§£å†…å­˜ç»“æ„æ˜¯æŒæ¡åƒåœ¾å›æ”¶çš„åŸºç¡€\n- [/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/è‡ªåŠ¨å†…å­˜ç®¡ç†/è°ƒä¼˜.md](/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/è‡ªåŠ¨å†…å­˜ç®¡ç†/è°ƒä¼˜.md) åƒåœ¾å›æ”¶å‚æ•°è°ƒä¼˜æ˜¯JVMæ€§èƒ½ä¼˜åŒ–çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œäº†è§£å„ç§GCç®—æ³•çš„ç‰¹ç‚¹æœ‰åŠ©äºåˆ¶å®šåˆé€‚çš„è°ƒä¼˜ç­–ç•¥\n- [/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/JAVAå†…å­˜æ¨¡å‹.md](/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/JAVAå†…å­˜æ¨¡å‹.md) Javaå†…å­˜æ¨¡å‹ä¸åƒåœ¾å›æ”¶æœºåˆ¶å…±åŒæ„æˆäº†JVMå†…å­˜ç®¡ç†çš„å®Œæ•´ä½“ç³»ï¼Œç†è§£ä¸¤è€…å…³ç³»æœ‰åŠ©äºæ·±å…¥æŒæ¡å†…å­˜ç®¡ç†æœºåˆ¶\n- [/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/JVM.md](/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/JVM.md) JVMæ•´ä½“æ¶æ„å’Œè¿è¡Œæœºåˆ¶çš„ç†è§£æœ‰åŠ©äºæ›´å¥½åœ°æŒæ¡åƒåœ¾å›æ”¶åœ¨å…¶ä¸­çš„ä½œç”¨å’Œæ„ä¹‰\n- [/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/ç±»åŠ è½½æœºåˆ¶.md](/ç¼–ç¨‹è¯­è¨€/JAVA/JVM/ç±»åŠ è½½æœºåˆ¶.md) ç±»åŠ è½½è¿‡ç¨‹ä¸åƒåœ¾å›æ”¶ç›¸äº’å½±å“ï¼Œç±»çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æ˜¯å†…å­˜ç®¡ç†çš„é‡è¦æ–¹é¢\n","metadata":"tags: ['ç¼–ç¨‹è¯­è¨€', 'æ“ä½œç³»ç»Ÿ', 'å¹¶å‘ç¼–ç¨‹']","hasMoreCommit":true,"totalCommits":32,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: æ•´ç†æ ‡ç­¾","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2026-01-14T15:19:12+08:00","author":"MY","message":"doc(åƒåœ¾å›æ”¶): é‡æ„æ–‡æ¡£","hash":"54dfc46d72963e392eddb5e19b43fb662b96448e"},{"date":"2025-01-02T13:38:48+08:00","author":"MY","message":"ğŸ“¦åƒåœ¾å›æ”¶","hash":"9fab22d65fc3acc5f78ac8cc2b31d80cd98db9b8"},{"date":"2024-11-18T19:24:29+08:00","author":"MY","message":"ğŸ“¦JVM åƒåœ¾å›æ”¶","hash":"201e7c6adf786d5853c16ec4f716fe7ac66750ef"},{"date":"2024-03-06T19:37:23+08:00","author":"MY","message":"âœå†…å­˜","hash":"bdca4f9b5eda90cddd3fca3de7789732339e98db"},{"date":"2023-11-28T16:10:09+08:00","author":"MY","message":"ğŸ“¦æ¸…ç†å¤§å›¾","hash":"fe96ec6ab871e31bc33e5c3b41fe7bae6dc855c9"},{"date":"2023-11-27T17:19:45+08:00","author":"MY","message":"ğŸ“¦æ¸…ç†å¤§å›¾","hash":"fafd16978c7437cbbe855ac44c6d7d3c89b3ddb6"},{"date":"2023-08-21T20:12:20+08:00","author":"MY","message":"âœJVM","hash":"593f0284b1b968f0d8db08aceae7d6cdef1f059f"},{"date":"2023-03-09T06:58:57Z","author":"My","message":"âœåƒåœ¾å›æ”¶","hash":"d7a0f6a8731ec784534e2ffeeba673889b3516a5"},{"date":"2022-10-12T21:49:08+08:00","author":"MY","message":"âœï¸Java","hash":"0dc1fa35b269f76ec4eb6430d20f667ca134b0ed"}],"createTime":"2019-11-23T17:02:59+08:00"}