{"name":"函数","id":"编程语言-JavaScript-函数","content":"# 函数\n\n## 定义\n\n```js\n// 命名函数\nfunction fn(){}\n// 匿名函数\nvar fn = function(){}\n// 函数对象 里面参数都必须是字符串格式\nvar fn = new Function('参数1','参数2'..., '函数体')\n```\n\n## 调用\n\n```js\n// 普通调用\nfn()\n// 对象的方法\nobj.fn()\n// 构造方法\nnew Object()\n// 事件绑定\nbtn.onclick = function(){}\n// 定时器函数\nsetInterval(function(){}, 1000);\n// 立即执行函数\n(function(){})();\n```\n\n## this\n\n调用方式   | this指向\n------ | --------------------\n普通函数调用 | window\n构造函数调用 | 实例对象原型对象里面的方法也指向实例对象\n箭头函数调用 | 外层的this\n对象方法调用 | 该方法所属对象\n事件绑定方法 | 绑定事件对象\n定时器函数  | window\n立即执行函数 | window\n\n### 改变this指向\n\n#### call()\n\n```js\nfunction fn(arg1){\n    console.log(this) // string cxk\n}\n// 修改fn函数里面的this指向'cxk'\nfn.call('cxk','arg1')\n```\n\n#### apply()\n\n```js\nfunction fn(a, b) {\n    console.log(a, b)\n    console.log(this) // obj\n}\nvar obj = { name: 'cxk' }\n// 参数使用数组传递\nfn.apply(obj, [1, 2])\n```\n\ncall 和 apply 传递的参数不一样,call传递参数使用逗号隔开,apply使用数组传递\n\n#### bind()\n\n```js\n// 返回一个包装函数\nvar f = fn.bind(obj, 1, 2)\nf()// 调用这个函数，this指向obj\n```\n\n## 严格模式\n\nJavaScript 除了提供正常模式外，还提供了严格模式（strict mode）。ES5 的严格模式是采用具有限制性 JavaScript变体的一种方式，即在严格的条件下运行 JS 代码\n\n- 消除了 Javascript 语法的一些不合理、不严谨之处，减少了一些怪异行为\n- 消除代码运行的一些不安全之处，保证代码运行的安全\n- 提高编译器效率，增加运行速度\n- 禁用了在 ECMAScript 的未来版本中可能会定义的一些语法\n\n### 开启严格模式\n\n```js\n// 为整个脚本开启严格模式\n\"use strict\";\n...\n// 在函数中开启严格模式\nfunction fn(){\n    \"use strict\";\n}\n```\n\n### 严格模式中的变化\n\n```js\n// 变量未声明不能使用\nnum = 10 \n// 变量不能删除\ndelete num\n// 严格模式下全局作用域中函数中的 this 是 undefined\nfunction fn() { console.log(this); }\n// 严格模式下,如果 构造函数不加new调用, this 指向的是undefined 如果给他赋值则 会报错\nObject();\n//严格模式下，定时器 this 还是指向 window\nsetTimeout(function() {\n  console.log(this); \n}, 2000);\n// 严格模式下不能有重名的函数\nfunction a(){}  \nfunction a(){} \n// 不允许在非函数的代码块内声明函数\nif (condition){\n    function(){}\n}\n```\n\n更多变化参考:<https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode>\n\n## 高阶函数\n\n- 当参数的类型或者返回值类型是一个函数，则称之为高阶函数\n\n## 闭包\n\n闭包（closure）指有权访问另一个函数作用域中变量的函数\n\n作用：延伸变量的作用范围\n\n```js\nfunction fn(){\n    var num=1;\n    return function(){\n        console.log(num);\n    }\n}\nfn()()\n``` \n\n## 拷贝\n\n- 浅拷贝\n\n```js\nvar obj = {name:'cxk'}\nvar o ={}\nObject.assign(o,obj)\n```\n\n- 深拷贝\n\n```js\nfunction deepCopy(newObj,oldObj){\n    for (var k in oldObj){\n        if (oldObj[k] instanceof Array){\n            newObj[k]=[]\n            deepCopy(newObj[k],oldObj[k])\n        }else if(oldObj[k] instanceof Object){\n            newObj[k]={}\n            deepCopy(newObj[k],oldObj[k])\n        }else{\n            newObj[k]=oldObj[k]\n        }\n    }\n}\n```\n","metadata":"","hasMoreCommit":false,"totalCommits":2,"commitList":[{"date":"2022-10-12T18:01:04+08:00","author":"cjiping","message":"✏️JS","hash":"193e284cf36b646e72d72c119211212c7c6ec6da"},{"date":"2020-02-28T14:31:46+08:00","author":"MY","message":"JS增加 函数高级","hash":"d093e9cc968f162655e779e8f48652a5e92e49dd"}],"createTime":"2020-02-28T14:31:46+08:00"}