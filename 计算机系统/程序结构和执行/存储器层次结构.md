# 存储技术

## 随机访问存储器

### 静态RAM

![](http://itfish.net/Home/Modules/Images/itfish_61045_0.jpg)

#### 工作原理

- 写
- 读
- 保持

#### 结构

![批注 2020-01-15 092634](/assets/批注%202020-01-15%20092634.png)

### 动态RAM 

![enter image description here](http://artimg.ishenping.com/20190430163945966_TSVNYF.jpg)

- 读写
- 保持
- 刷新
  - 集中刷新
  - 分散刷新
  - 异步刷新

静态存储器的不足

- 晶体管过多
- 存储密度低
- 功耗大

### 传统DRAM

  ![](http://itfish.net/Home/Modules/Images/itfish_61045_2.jpg)

- 内存模块

  ![](http://itfish.net/Home/Modules/Images/itfish_61045_3.jpg)

- 增强DRAM

- 非易失性存储器

- 访问主存

  ![](http://itfish.net/Home/Modules/Images/itfish_61045_4.jpg)

## 磁盘存储

- 磁盘构造

  ![](http://itfish.net/Home/Modules/Images/itfish_61045_5.jpg)

- 磁盘容量

  - 记录密度
  - 磁道密度
  - 面密度

- 磁盘操作

  - 寻道时间
  - 旋转时间
  - 传送时间

- 逻辑磁盘块

  （盘面，磁道，扇区）

- 连接IO设备

  ![](http://www.pianshen.com/images/281/0013ac41fa289bfec93c3c9ece6b41a9.png)

  - 通用串行总线（USB）
  - 图形卡
  - 主机总线适配器

- 访问磁盘

  **内存映射**

## 固态硬盘

## 存储技术的趋势

- 价格和性能折中
- 不同存储技术的价格与属性以不同的速率变化

# 局部性

- 时间局部性
  - 时间局部性的程序结构体现： 循环结构
- 空间局部性
  - 空间局部性的程序结构体现：顺序结构

## 对程序数据引用的局部性

## 取指令的局部性

# 存储器层次结构

![](http://www.pianshen.com/images/328/6f35b9255f2323c21c19478089c6d008.png)

## 基本存储体系

1)输入设备将程序与数据写入主存；
2) CPU取指令；
3) CPU执行指令期间读数据；
4) CPU写回运算结果；
5) 输出设备输出结果；

### 主存慢的原因

- 主存增速与CPU增速不同步；
- 指令执行期间多次访问存储器；

### 主存容量不足的原因

- 存在制约主存容量的技术因素
  - CPU、主板等相关技术指标确定
- 应用对主存的需求不断扩大

## 存储器层次结构中的缓存

![](http://www.pianshen.com/images/46/61cff5bd9636e956ae24618f4e6a90de.png)

- 缓存命中
- 缓存不命中
  - 冷不命中
  - 冲突不命中
- 缓存管理

## 存储扩展

- 位扩展
- 字扩展
- 字位扩展

# 主存中的数据组织

- 主存的一个存储单元所包含的二进制位数
- 目前大多数计算机的主存按字节编址，存储字长也不断加大,如16位字长、32位字长和64位字长

## 数据存储与边界

未按边界对齐存放：虽节省了空间，但增加了访存次数
按边界对齐的数据存储：浪费一些空间

- 小端存储
  - 就是低位字节排放在内存的低地址端，高位字节排放在内存的高地址端
- 大端存储
  - 就是高位字节排放在内存的低地址端，低位字节排放在内存的高地址端

# 高速缓存存储器

*L1缓存*

## 通用的高速缓存存储器组织结构

## 直接映射高速缓存

## 缓存写

## 高速缓存参数的性能影响

- 不命中率
- 命中率
- 命中时间
- 不命中处罚

# 编写高速缓存友好的代码

# 高速缓存对程序性能的影响