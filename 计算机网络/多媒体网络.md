# 多媒体网络

## 应用

视频：高比特率，但可以通过压缩的方式提供多重版本以适应不同的比特率

音频：通过每秒进行n次采样进行量化，并且可以进行压缩MP3 AAC

## 流式存储视频

都广泛应用了客户端缓存，通过几秒的加载：

1. 通过缓存吸收了网络的时延波动
2. 如果网络带宽暂时小于消耗速率，那也能继续播放

### UDP流

- 实时传输协议RTP

由于TCP没有拥塞机制，所以UDP流能以视频消耗的速率将分组推入网络

- 实时流协议RTSP

这种协议除了一个UDP流，还独立维护一个控制连接，客户可以根据这个控制连接实时控制视频的播放暂停快进等

### HTTP流

不借助其他辅助技术，由于TCP的拥塞控制和由于网络带宽的不确定性，流式视频是很难在基于TCP的网络是应用的。但如果借助预取跟客户端缓存，这就有可能了。

- 预取视频

客户通过以高于消耗速率的速率下载视频，这样就能应付某些情况下带宽降低的影响。

- 客户缓存与TCP缓存

![屏幕截图 2021-01-30 152417](/assets/屏幕截图%202021-01-30%20152417.png)

当客户端暂停视频播放，客户端缓存一满就会有可能给服务器造成压力，浙江导致服务器降低发送速率。

- 适应性HTTP流

DASH（动态适应流），通过视频的多个不同速率的版本来实现自适应。

## IP语音

> 使用互联网传输的实时会话式语音

- 尽力为非服务的限制：无保证

关于丢包问题，使用TCP来实现会话式实时语音是不可接受的。但丢包问题并非是个严重的问题，可以采取纠错码的方式来对抗少量丢包。

对于端到端时延，超过400ms延迟的分组时不可接受的，因此超过这个阈值的分组一般直接就被丢弃了。

关于时延抖动问题，当考虑到路由器的排队时延，很有可能发送方相隔的两个分组时延会扩大。这需要采取一些手段来解决。

### 接收方消除时延抖动

为了消除抖动，使用两个机制组合一起实现：

1. 为每个块设定一个时间戳
2. 延迟播放

通过延迟播放的方式可以使接收方有一定的缓冲时间来将延迟到来的分组进行组合。

但这个时延的控制有两种：一种往往是固定时延，另外一种是根据网络状况来决定的动态时延。

### 丢包处理

1. 前向纠错吗，通过冗余的方式

![屏幕截图 2021-01-30 160908](/assets/屏幕截图%202021-01-30%20160908.png)

2. 交织：通过将丢失分摊到各个块上面

![屏幕截图 2021-01-30 160945](/assets/屏幕截图%202021-01-30%20160945.png)

3. 差错掩盖：音频信号会呈现出大量的短周期相似性，这些即使丢了也不会影响到实际语音

# 支持多媒体的网络
