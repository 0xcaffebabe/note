{"name":"多媒体网络","id":"计算机网络-多媒体网络","content":"# 多媒体网络\n\n> 多媒体网络不是一组协议的集合，而是**在不可靠、无保证的网络之上，构造\"人类可感知连续体验\"的系统工程**。\n\n---\n\n## 一、多媒体网络的第一性原理\n\n### 1. 本质矛盾\n\n多媒体网络面对的是一组**不可消除、只能权衡的根本矛盾**：\n\n1. **人类感知是连续的，而网络是离散的**\n2. **网络是尽力而为的，而体验必须是可控的**\n3. **实时性要求与可靠性机制天然冲突**\n4. **网络不可预测，而应用必须“看起来稳定”**\n\n这些矛盾决定了：\n👉 多媒体网络**无法依赖网络本身的确定性**，只能通过**端系统与应用层机制进行补偿**。\n\n---\n\n### 2. 多媒体系统的核心目标\n\n多媒体网络并不追求“网络指标最优”，而是追求：\n\n> **感知质量最优（QoE, Quality of Experience）**\n\n因此，系统设计遵循的不是“零丢包、零错误”，而是：\n\n* 可接受的丢包\n* 可控的时延\n* 可平滑的播放\n\n---\n\n## 二、端到端多媒体网络的抽象架构\n\n### 1. 分层不是 OSI，而是“能力分工”\n\n```\n┌──────────────────────┐\n│ 用户感知层（QoE）     │ ← 连续体验、音画同步\n├──────────────────────┤\n│ 应用适配层            │ ← 编码、缓存、自适应\n├──────────────────────┤\n│ 媒体承载层            │ ← RTP / UDP / TCP\n├──────────────────────┤\n│ 会话与控制平面        │ ← SIP / RTSP\n├──────────────────────┤\n│ 网络服务模型          │ ← Best Effort / DiffServ / QoS\n└──────────────────────┘\n```\n\n**关键思想**：\n\n* 网络层**不保证体验**\n* 应用层**对不确定性负责**\n\n---\n\n## 三、多媒体应用的基本特性\n\n### 1. 视频\n\n* 高比特率\n* 强时间连续性\n* 可压缩、可多版本编码\n\n👉 核心思想：\n**空间冗余换时间连续性**（压缩 + 缓冲）\n\n---\n\n### 2. 音频\n\n* 采样 + 量化\n* 对短期丢包容忍度高\n* 对时延极其敏感\n\n👉 核心思想：\n**允许不完整，但不能不及时**\n\n---\n\n## 四、时间连续性的核心机制：缓存\n\n### 1. 缓存的系统本质\n\n缓存不是性能优化，而是**时间不确定性的吸收器**：\n\n* 吸收网络抖动\n* 抵御短期带宽下降\n* 解耦发送速率与播放速率\n\n---\n\n### 2. TCP + 应用缓存的协同\n\n```\n服务器\n  └─ TCP发送缓存\n        ↓\n网络\n        ↓\n客户端\n  └─ TCP接收缓存\n        ↓\n  └─ 应用播放缓存\n        ↓\n    解码与显示\n```\n\n**关键点**\n\n* TCP 保证传输稳定性\n* 应用缓存保证播放稳定性\n* 两者共同对抗不确定网络\n\n---\n\n## 五、流媒体传输模型的本质区分\n\n### 1. UDP 实时流：以时间为中心\n\n**典型协议**：RTP / RTSP\n**设计哲学**：\n\n* 不等丢失的包\n* 不重传\n* 时间一旦过期即丢弃\n\n👉 **时间优先于完整性**\n\n---\n\n### 2. HTTP 流：以吞吐为中心\n\n**关键机制**\n\n* 预取\n* 客户端缓存\n* 字节范围请求\n\n**适应性 HTTP 流（DASH）**\n\n* 多码率版本\n* 客户端根据网络动态选择\n\n👉 **用时间换确定性**\n\n---\n\n### 3. 本质对比\n\n| 维度     | UDP 实时流 | HTTP 流 |\n| ------ | ------- | ------ |\n| 核心目标   | 低时延     | 稳定播放   |\n| 丢包处理   | 忽略 / 掩盖 | 重传     |\n| 网络适应   | 弱       | 强      |\n| 工程可部署性 | 低       | 高      |\n\n---\n\n## 六、实时语音（VoIP）的系统约束\n\n### 1. 不可接受的条件\n\n* 端到端时延 > 400ms\n* TCP 重传导致的阻塞\n\n👉 **宁可丢，也不能等**\n\n---\n\n### 2. 抖动的本质与对策\n\n#### 抖动来源\n\n* 排队延迟\n* 路径变化\n\n#### 解决机制\n\n1. 时间戳\n2. 延迟播放（抖动缓冲）\n\n**策略选择**\n\n* 固定缓冲：简单但不自适应\n* 动态缓冲：复杂但体验更优\n\n---\n\n### 3. 丢包处理的三种哲学\n\n| 方法   | 本质     | 代价   |\n| ---- | ------ | ---- |\n| 前向纠错 | 空间换可靠性 | 带宽增加 |\n| 交织   | 时间分摊风险 | 时延增加 |\n| 掩盖   | 感知容忍   | 信号失真 |\n\n---\n\n## 七、实时会话的控制平面\n\n### 1. 平面分离思想\n\n* **媒体平面**：RTP（承载数据）\n* **控制平面**：RTSP / SIP（控制会话）\n\n---\n\n### 2. RTP：媒体承载最小集合\n\n**提供但不保证**\n\n* 序号\n* 时间戳\n* 同步信息\n\n👉 RTP **不解决问题，只暴露问题给应用**\n\n---\n\n### 3. SIP：会话的社会化基础设施\n\n**解决的问题**\n\n* 呼叫建立\n* 地址发现\n* 会话管理\n\n👉 SIP 本质上是：\n\n> **实时通信世界的“HTTP + DNS”**\n\n---\n\n## 八、支持多媒体的网络服务模型\n\n### 1. 三种服务哲学\n\n| 模型     | 思想     | 现实地位 |\n| ------ | ------ | ---- |\n| 尽力而为   | 简单、可扩展 | 主流   |\n| 区分服务   | 有限优先级  | 局部使用 |\n| QoS 保证 | 确定性    | 理论理想 |\n\n---\n\n### 2. 工程现实的选择逻辑\n\n#### 尽力而为网络\n\n* 通过增加带宽缓解问题\n* 依赖应用层适配\n\n#### 区分服务\n\n* 优先级 + 调度\n* 面临资源利用率与公平性冲突\n\n#### QoS 网络\n\n* 类似电路交换\n* 状态不可扩展\n* 跨域难以部署\n\n👉 **互联网选择了“应用层复杂，网络层简单”**\n\n---\n\n## 九、为什么今天的主流是 HTTP + 自适应？\n\n这是一个**工程与现实博弈的结果**：\n\n* 穿透防火墙与 NAT\n* 与 CDN 完美协同\n* 运维成本低\n* 渐进部署友好\n\n👉 胜出的不是最\"优雅\"的方案，而是**最能活下来的方案**。\n\n---\n\n## 十、能力视角总结（稳定认知）\n\n```\n多媒体网络核心能力\n├── 时间连续性\n│   ├── 缓存\n│   ├── 延迟播放\n├── 带宽适应性\n│   ├── 预取\n│   ├── 自适应码率\n├── 丢包容忍\n│   ├── FEC\n│   ├── 掩盖\n└── 会话控制\n    ├── 建立\n    ├── 维护\n    └── 终止\n```\n\n## 关联内容（自动生成）\n\n- [/计算机网络/应用层.md](/计算机网络/应用层.md) 介绍了RTP/RTSP和SIP等多媒体网络中的关键协议，与本文档内容密切相关\n- [/计算机网络/无线网络.md](/计算机网络/无线网络.md) 讨论了无线网络中多媒体传输面临的挑战，如带宽限制、丢包和时延，与本文档的QoS保障机制相关\n- [/计算机网络/MQTT.md](/计算机网络/MQTT.md) 涉及服务质量(QoS)机制，与多媒体网络中的QoS保障有相似的设计理念\n- [/操作系统/进程与线程.md](/操作系统/进程与线程.md) 提到了多媒体系统中的可预测性需求，与本文档中时间连续性保障相关\n- [/操作系统/linux/Linux性能优化.md](/操作系统/Linux性能优化.md) 涉及多媒体场景下的性能优化，与多媒体网络的性能保障相关\n- [/软件工程/架构/系统设计/流量控制.md](/软件工程/架构/系统设计/流量控制.md) 讨论了漏桶等流量控制机制，与多媒体网络中的流量控制原理一致\n","metadata":"tags: ['网络']\nbooks: [\n  {name: '计算机网络:自顶向下方法'}\n]","hasMoreCommit":false,"totalCommits":8,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: 整理标签","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2026-01-07T16:26:09+08:00","author":"MY","message":"feat(doc): 多媒体网络文档重构，增加流媒体传输核心机制详解","hash":"865fed803a296548cf238860a927c6bf9b386f67"},{"date":"2024-11-12T14:25:11+08:00","author":"MY","message":"📦计算机网络","hash":"1ce5935bd6b1e4411336dcbbe6fb19ef37f59a22"},{"date":"2022-06-13T21:42:23+08:00","author":"MY","message":"✏️更新 多媒体网络","hash":"971a23b21608e0ee105675ba7daabea51bc495fe"},{"date":"2021-02-02T15:33:33+08:00","author":"cjiping","message":"✏更新 计算机网络 多媒体网络","hash":"60279b4588b5bf3add8d22b00cbddbe34d6f7e7c"},{"date":"2021-01-30T16:16:43+08:00","author":"cjiping","message":"✏更新 计算机网络 无线网络","hash":"837d68ffd5b374f9bec94875704bd62c2c074a7e"},{"date":"2021-01-29T16:48:41+08:00","author":"cjiping","message":"✏更新 计算机网络 多媒体网络","hash":"f8fe4028da62a7571b4f826e0c2e38d78a26c0e1"},{"date":"2019-11-01T19:24:57+08:00","author":"MY","message":"暂时完结计算机网络","hash":"c92b52aea076cd82a127e383344ec42b50bd4363"}],"createTime":"2019-11-01T19:24:57+08:00"}