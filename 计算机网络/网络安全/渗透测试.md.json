{"name":"渗透测试","id":"计算机网络-网络安全-渗透测试","content":"# 渗透测试\n\n## 渗透测试种类\n\n- 白盒测试\n- 黑盒测试\n\n## 常用方法\n\n### 有针对性的测试\n\n公司内部和专业渗透测试团队共同完成，可以得到被测系统的内部资料，包括部署信息、网络信息、详细架构设计，甚至是产品代码\n\n### 外部测试\n\n对外部可见的服务器和设备，模拟外部攻击者对其进行攻击\n\n### 内部测试\n\n测试人员会拥有较高的系统权限，也能够查看各种内部资料，目的是检查内部攻击可以给系统造成什么程度的损害，为了防止系统的内部员工对系统进行内部攻击，同时以此来制定系统内部员工的权限管理策略\n\n### 盲测\n\n严格限制提供给测试执行人员或团队信息的前提下，由他们来模拟真实攻击者的行为和上下文\n\n### 双盲测\n\n不光测试人员对系统内部知之甚少，而且被测系统内部也只有极少数人知道正在进行安全测试\n\n## 方法论\n\n渗透测试方法论有许多，著名的有OWASP(开放式web应用安全项目)\n\n- ISSAF(信息系统安全评估框架)\n\n### OSSTMM(开源安全测试方法论)\n\n- 盲测\n- 双盲测\n- 灰盒测试\n- 双灰盒测试\n- 串联测试\n- 逆向测试\n\n## 信息收集\n\n- 域名注册信息\n\n```shell\n# 并不止局限于使用命令行whois程序\nwhois -h whois.crsnic.net \"domain google.com\"\n```\n\n## DNS记录分析\n\n```\nA-将域名指向一个PV4地址\nCNAME-将域名指向另外一个域名\nAAAA-将域名指向一个PV6地址\nNS-将子域名指定其他DNS服务器解析\nMX-将域名指向邮件服务器地址\nSRV-记录提供特定的服务的服务器\nTXT-文本长度限制512，通常做SPF记录（反垃圾邮件）\nCAA-CA证书颁发机构授权校验\n显性URL-将域名302重定向到另外一个地址\n隐性URL-与显性URL类似，但是会隐藏真实目标地址\n```\n\n- 查询dns地址\n\n```shell\nhost -a ismy.wang\n```\n- 使用dig达到同样的效果\n\n```shell\ndig ismy.wang any\n```\n\n### 路由信息\n\n```shell\ntraceroute ismy.wang\ntcptraceroute ismy.wang\n```\n\n### 搜索引擎\n\n- 善用搜索引擎搜索相关主机的邮箱或者用户名\n\n## 目标识别\n\n## 主机识别\n\n- ping\n\n\n- arping\n\n```shell\narping 192.168.43.1 # 局域网主机识别\n```\n\n- fping\n\n```shell\nfping -g 192.168.43.0/24 # 扫描局域网主机\n```\n\n- hping3\n- nping\n- nbtscan\n\n### 操作系统识别\n\n- 被动式识别\n  - p0f\n- 主动式\n  - nmap\n\n## 服务枚举\n\n### nmap\n\n- 扫描目标指定\n  - 普通点分十进制(192.168.1.1)\n  - CIDR标记法(192.168.1.0/24)\n  - 十进制ip区间(192.168.1.1-255)\n  - 多个ip(ip1,ip2)\n\n- 扫描方式\n  - sT：会进行三次握手\n  - sS:只会进行一次握手\n  - sN,sF,sX:通过判断目标有无回应确定端口状态\n  - sM:同上\n  - sA:判断是否有防火墙过滤\n  - sW:窗口扫描\n  - sI:通过僵尸网络\n\n- 端口选项\n  - p:端口范围\n  - F:快速扫描\n  - r:顺序扫描\n\n- 时间选项\n  - T:指定扫描模式\n\n- 服务版本识别\n\n```shell\nnmap -sV 192.168.43.0/24\n```\n\n- 强力选项A\n  - 会开启服务版本识别，操作系统识别，脚本扫描，路由追踪\n\n### nbtscan\n\n可以扫描主机netbios信息\n\n>NetBIOS，为网上基本输入输出系统（英语：Network Basic Input/Output System）的缩写，它提供了OSI模型中的会话层服务，让在不同计算机上运行的不同程序，可以在局域网中，互相连线，以及分享数据。严格来说，NetBIOS不是一种网上协议，而是应用程序接口（API\n\n```shell\nnbtscan 192.168.43.1-254\n```\n\n### snmap枚举\n\n- onesixtyone\n- snmpcheck\n\n### VPN枚举\n\n## 漏洞映射\n\n- 本地漏洞\n- 远程漏洞\n\n### 漏洞分类\n\n- 设计类\n- 实施类\n- 运营类\n\n### 工具\n\n- OpenVAS\n  - OpenVAS是功能齐全的漏洞扫描程序\n- Cisco分析工具\n\n### 模糊分析工具\n\n- 通过发送有问题的数据来检测问题\n\n### SNMP分析\n\n### SMB分析\n\n### web程序分析\n\n## 社会工程\n\n- 冒名顶替\n- 利益交换\n\n### 工具\n\n- SET\n\n## 漏洞利用\n\n### exploit资料库\n\n- 发布了部分已知漏洞的利用方法\n\n### 工具 metasploit\n\n- exploit 漏洞利用模板\n- payload 包含恶意程序的有效载荷\n- shell\n  - bind shell\n  - reverse shell\n  - meterpreter\n\n## 权限提升\n\n- 横向提权\n- 纵向提权\n\n### 本地漏洞利用\n\n### 密码攻击\n\n#### 离线攻击工具\n\n- hash-identifier\n- Hashcat\n- RainbowCrack\n- samdump2\n- john\n- Ophcrack\n- Crunch\n\n#### 在线破解工具\n\n- CeWL\n- Hydra\n- Medusa\n\n### 网络欺骗工具\n\n- DNSChef\n  - 可以伪造假DNS应答地址\n- arpspoof\n- Ettercap\n  - 截取会话与密码\n\n### 网络嗅探器\n\n- Dsniff\n  - 密码捕获\n- tcpdump\n- Wireshark\n- \n\n## 访问维护\n\n### 操作系统后门\n\n- Cymothoa\n- Intersect\n- Meterpreter后门\n\n### 隧道工具\n\n- dns2tcp\n- iodine\n- ncat\n- proxychains\n- ptunnel\n- socat\n- sslh\n- stunnel4\n\n### web后门\n\n- WeBaCoo\n  - 通信采用了cookie\n- weevely\n- php meterpreter\n\n## 攻击Windows\n\n### 取得身份前的攻击手段\n\n#### 认证欺骗\n\n- 弱口令\n- 暴力破解\n- 口令猜测\n- 中间人欺骗\n\n#### 远程非授权漏洞发掘\n\n- metasploit漏洞发掘\n  - 网络服务漏洞\n  - 应用程序漏洞\n  - 驱动程序漏洞\n\n### 取得合法身份后的攻击手段\n\n- 权限提升\n- 密码哈希获取\n  - 密码文件存放在/system32/config的一个sam文件下\n  - 还是通过暴力破解\n- 远程控制后门\n  - 远程保留一个shell，来供攻击者远程访问\n- 端口重定向\n- 掩盖入侵痕迹\n  - 关闭审核\n  - 清理日志\n  - 隐藏文件\n\n### Windows安全功能\n\n- 防火墙\n- 自动更新\n- 安全中心\n- 安全策略与群组策略\n- 微软安全软件\n- Windows资源保护\n- UAC\n- DEP(数据执行保护，对付缓冲区溢出)\n\n## 攻击unix\n\n### root 权限获取\n\n- 弱点映射\n  - 通过在公共信息获得漏洞资源\n\n### 远程访问\n\n- 暴力破解攻击\n- 缓冲区溢出攻击\n  - return to libc\n  - 字符串格式化攻击\n    - 用户的输入被当做指令执行\n  - 输入验证攻击\n  - 整数溢出攻击\n    - 由于无符号跟有符号的区别，可能被利用为漏洞\n  - 悬摆指针攻击\n    - 废弃的指针又被重新利用\n\n#### 获取一个shell\n\n- 反向通道\n  - 攻击者的主机开启监听服务，利用远程主机的漏洞，连接到攻击者主机\n  - 预防的措施包括关闭不必要的服务&使用防火墙\n\n#### 常见的远程攻击\n\n- FTP\n  - 权限过大导致系统敏感文件被读取\n  - 溢出攻击\n- email软件\n- rpc\n  - 溢出攻击\n- NFS\n  - 权限配置问题\n- DNS\n  - 毒化\n- ssh\n- openssl\n  - 通过非对称加密计算让服务端过载\n- apache\n  - dos\n\n### 本地访问\n\n- 离线口令破解\n- 本地缓冲溢出攻击\n- 内核缺陷\n\n### 获取root权限之后\n\n- Rootkit\n- 特洛伊木马\n  - 签名校验\n- 嗅探程序\n- 日志清理\n- \n\n## APT\n\n> 高级长期威胁（英语：Advanced Persistent Threat，缩写：APT），又称高级持续性威胁、先进持续性威胁等，是指隐匿而持久的电脑入侵过程，通常由某些人员精心策划，针对特定的目标\n\n确定目标 -> 攻击 -> 进入网络 -> 横向提权 -> 窃取数据 -> 管理与维护后门\n\n- gh0st --> 国内的灰鸽子\n\n### 证据收集\n\n- 内存分析\n- 主文件表\n- 网络进程\n- 宿主文件\n- 进程监控\n\n## 拨号攻击\n\n- 战争拨号器：本质上就是一种扫描器\n\n### 软件\n\n- WarVOX\n- TeleSweep\n- PhoneSweep\n\n### VPN攻击\n\n- 信息泄露\n- 错误的配置导致安全问题\n\n### IP语音攻击\n\nSIP协议的安全性\n\n- 扫描端点\n- 监听攻击：主要是在通过嗅探网络数据来实现\n  - 可以配合SRTP来加密通信\n\n## 无线攻击\n\n### 发现\n\n- 主动发现\n- 被动发现\n  - aircrack-ng\n\n    ```shell\n     sudo airmon-ng start wlan0 # 查看网卡接口\n     sudo airodump-ng wlp3s0 # 扫描AP\n    ```\n\n### 监听数据传输\n\n- wireshark\n\n### 拒绝服务攻击\n\n- 消除认证攻击\n  - 假冒服务端或客户端发起连接断开请求\n\n### 加密攻击\n\n- wep\n- 重放攻击\n- 离线破解\n\n## 硬件攻击\n\n- 物理锁撞锁\n- 门禁卡复制\n- ATA设备访问\n- 移动设备autorun\n- 默认配置带来的危险\n- 硬件电路图探测，嗅探数据\n- 后门代码\n\n## 移动设备攻击\n\n- rooting\n- 本地(native)文件\n- 远程shell漏洞\n- 数据窃取\n- 能力泄露\n- 恶意软件\n- 应用程序漏洞\n- 便携式网络攻击器\n\n","metadata":"tags: ['网络安全']\nbooks: [\n  {name: '黑客大曝光'},\n  {name: 'Kali Linux 渗透测试的艺术'}\n]","hasMoreCommit":false,"totalCommits":5,"commitList":[{"date":"2023-03-27T22:00:33+08:00","author":"MY","message":"📦网络安全","hash":"2fa0bc18462a351624bfe9ee2b30a45610ffdcdd"},{"date":"2023-03-09T09:41:00Z","author":"My","message":"🛠替换在线图片","hash":"0c8b08bc22fbe482ba02da2f1fcad211441d3c23"},{"date":"2023-01-18T10:27:55+08:00","author":"cjiping","message":"✏️测试","hash":"3426e590c3c41bd420d7fc9e80b2762028d5f0a1"},{"date":"2022-03-10T14:44:34+08:00","author":"cjiping","message":"📦整理 网络安全","hash":"0627c76525382c476b79af5063e287699dfd8be6"},{"date":"2021-10-27T18:03:06+08:00","author":"cjiping","message":"📦整理 KALI渗透测试","hash":"bc803eef355f6ab063712cef6afecdfad0d8b1ea"}],"createTime":"2021-10-27T18:03:06+08:00"}