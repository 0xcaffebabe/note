- 数据平面：控制数据报从路由器输入链路转发到输出链路
- 控制平面：控制数据在端到端之间的路由方式

# 路由器工作原理

![](https://images2015.cnblogs.com/blog/669116/201705/669116-20170521171407150-1287558581.jpg)

## 输入

- 线路链接
- 对数据报进行拆封
- 查找转发排队

## 交换

- 通过内存转发
- 通过总线转发
- 通过互联网络转发

前两种在同一时刻内只有一个分组能被处理，最后一种如果输出端口不同，则能并行转发

## 分组调度

- 先进先出
- 优先权排队
  - 即分为两个队列，一个优先级较高，较高优先级的队列如果有分组，则立马处理
- 循环和加权公平排队
  - 优先级队列不固定，在各个队列之间的轮流

# 网际协议

## IPV4 

![](https://img-my.csdn.net/uploads/201212/05/1354698013_5018.jpg)

### 分片

由于某些链路的帧可承载的字节有限，故在路由器会将数据载荷分为几个部分，后一一发送，并把组装数据的任务交给接收端

### IPV4编址

- 点分十进制
- 同一子网内的IP拥有相同的前缀

*动态主机配置协议（DHCP）*

### 网络地址转换NAT

![](https://www.cisco.com/c/dam/en/us/support/docs/ip/network-address-translation-nat/211269-NAT-in-VoIP-04.png)

### IPV6

![](https://huminxi.netlify.com/img/hufei/062018/ipv6-datagram-format.png)

*IPV4到IPV6之间的过渡：建隧道*

![](https://img-blog.csdn.net/20160109165935943)

# 通用转发

- 跨越网络层-链路层

# 路由选择算法

- 集中式
  - 迪杰斯特拉算法得出最短路径
- 分散式
  - 距离向量算法

# OSPF

自治系统内部的路由选择

- 集中式算法
- 每台路由器都有整个自治系统的完整链路图

# BGP

自治系统之间的路由选择协议




