# Service Mesh

SpringCloud Dubbo 等微服务框架的痛点：

- 侵入性强 业务代码与框架代码混合在一起
- 升级成本高 一旦框架升级，就需要重新进行测试 重新部署上线而跟业务没有太大的关系
- 版本碎片化严重 服务自己独立演化 线上中间件或者框架版本不一，难以统一治理
- 中间件演变困难 由于需要兼容老版本 历史包袱沉重
- 学习曲线不够平滑 单单一个SpringCloud就有大大小小几十个组件
- 功能不全 一些功能现有的微服务框架并没有

**痛点往往是技术发展到一定的程度必然要经历的阶段，这些痛点促使技术不断发展、不断前进**

## 基本概念

>Service Mesh 是一个专门处理服务通讯的基础设施层。它的职责是在由云原生应用组成服务的复杂拓扑结构下进行可靠的请求传送。在实践中，它是一组和应用服务部署在一起的轻量级的网络代理，并且对应用服务透明

![20201023152156](/assets/20201023152156.png)

控制平面：

- 不直接解析数据包
- 与控制平面中的代理通信，下发策略和配置
- 负责网络行为的可视化
- 常提供 API 或者命令行工具可用于配置版本化管理，便于持续集成和部署

数据平面：

- 直接处理入站（业务应用）和出站数据包，转发、路由、健康检查、负载均衡、认证、鉴权、产生监控数据等
- 对应用透明

服务网格带来的变革：

- SDK轻量化
- 由于只需要少量的SDK 微服务治理与业务逻辑的解耦
- 同样由于SDK轻量 异构系统的统一治理，编写不同语言的SDK更加轻松

服务网格相比传统微服务框架的优势：

- 由于服务网格是一个基础设施层 所有的服务间通信都要通过它 所以带来了良好的可观察性
- 通过服务网格 可以很好地通过这个基础设施来对服务间的流量进行控制或者进行故障模拟
- 服务网格提供了保护网络调用的能力和基础设施

服务网格带来的问题：

- 复杂度更高
- 对运维要求更高
- 增加了一个中间层 肯定会有延迟问题
- 平台适配的侵入性
