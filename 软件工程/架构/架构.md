# 架构

架构的分类：

- 基础架构 以云平台 操作系统等基础设施为主
- 中间件与大数据架构
- 业务系统架构
    - 通用软件系统 办公软件 浏览器等一类
    - 离线业务系统 大数据分析 数据挖掘系统
    - 在线业务系统 在线为特定业务服务的系统

这些不同分类的架构界限不是很清晰 随着时间演进 各个类型之间的系统边界会互相渗透

## 架构的演进

站在后端开发人员的角度上软件架构风格从大型机（Mainframe），到原始分布式（Distributed），到大型单体（Monolithic），到面向服务（Service-Oriented），到微服务（Microservices），到服务网格（Service Mesh），到无服务（Serverless）

谈起微服务，会想到技术异构，便于部署，高性能等等，但这些似乎都只是锦上添花，架构的核心在于解决软件的存活问题，如果一个软件压根就不能提供服务，这些锦上添花的功能也毫无作用

## 架构的目标

用最小的人力成本来满足构建和维护该系统的需求

- 乱麻系统

过度的自信导致软件维护成本持续上升

## 两个维度

- 行为价值
  - 让系统正常运行
- 架构价值
  - 让系统更容易修改

## 四种架构模式

- 按层封装

也就说传统的水平分层架构，在项目初期很合适

```java
package controller{
    Controller;
}
package service {
    Service;
    ServiceImpl;
}
package dao {
    Dao;
}
```

- 按功能封装

即垂直切分

```java
package Order {
    OrderController;
    OrderService;
    OrderDao;
}
```

- 端口与适配器

```java
package controller{...}

package domain {
    Service;
    ServiceImpl;
    Domain;
}

package dao{...}
```

- 按组件封装

优点服务架构的味道

```java
package controller {...}
package order {
    Service;
    Dao;
}
```

## COLA

### 分层

![批注 2020-06-26 092443](/assets/批注%202020-06-26%20092443.png)

### 扩展设计

在系统设计时，针对业务或者场景预留一些扩展点