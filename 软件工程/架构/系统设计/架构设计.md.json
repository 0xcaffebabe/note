{"name":"架构设计","id":"软件工程-架构-系统设计-架构设计","content":"# 架构设计\n\n> **定位**：这是一个面向架构师的高级知识体系文档，聚焦架构设计背后的原理、模型、方法论与决策哲学，为复杂系统建设提供可复用的认知框架。\n\n---\n\n## 1. 架构设计的本质\n\n架构设计的核心任务不是选择技术，而是**组织复杂性**。\n其本质可归纳为三件事：\n\n1. **抽象复杂性**：识别系统“难以改变的部分”，形成稳定结构。\n2. **约束系统边界**：通过模型、原则、接口与契约保持系统可控。\n3. **降低长期成本**：让系统能在不推翻原有结构的情况下持续演进。\n\n因此，架构是一种 **约束 + 构造 + 演化** 的综合能力，而非对代码结构的静态描述。\n\n---\n\n## 2. 架构设计要素体系\n\n原文的“架构设计要素”较为散乱，下面将其抽象为一个稳定的概念体系。\n\n### 2.1 架构规划：战略层\n\n**目标：做正确的系统，而不是把系统做正确。**\n\n规划解决的问题：\n\n* 系统存在的价值？\n* 哪些能力必须构建？哪些可以购买或外包？\n* 哪些地方需要“重投入”？哪些必须“适可而止”？\n* 当前阶段与未来阶段的生命周期策略？\n\n**输出是可落地、可迭代的架构蓝图**，同时明确约束、边界和演进路线。\n\n---\n\n### 2.2 架构分解：结构层\n\n通过“分而治之”将需求与复杂性拆解为可实现的模块。\n\n设计分解遵循三个原则：\n\n1. **分解粒度**：粒度越细成本越高，粒度越粗耦合越强，需要寻找“认知分界”。\n2. **稳定性中心化**：优先将不易改变的部分抽象出来（领域对象、契约、平台层）。\n3. **演化式设计**：架构不是一次性交付，而是迭代演化的系统。\n\n---\n\n### 2.3 架构输入：系统之“约束空间”\n\n架构的设计空间由以下四类输入共同定义：\n\n| 输入类型    | 内容            | 架构意义         |\n| ------- | ------------- | ------------ |\n| 功能性需求   | 系统做什么         | 确定功能性模型、边界   |\n| 非功能需求   | 性能、可用性、弹性、扩展性 | 驱动架构风格选择     |\n| 限制条件    | 团队、预算、法规、安全   | 决定可行空间       |\n| 现有资产与技术 | 存量系统、技术栈      | 决定系统兼容性与迁移成本 |\n\n架构的可行性由这些因素共同决定，而非单一技术选择。\n\n---\n\n### 2.4 架构输出：系统蓝图体系\n\n结构化后的架构输出通常包含五类蓝图：\n\n1. **架构规划蓝图**：目标、范围、愿景、阶段路线图\n2. **研发设计蓝图**：架构模型、组件关系、契约、边界\n3. **测试蓝图**：验证策略、质量属性验证体系\n4. **部署蓝图**：物理拓扑、管控体系、发布策略\n5. **采购蓝图**：RFP、POC、技术决策依据\n\n---\n\n## 3. 架构设计原则\n\n原文原则过于工程化，下面将其抽象为普适的架构哲学。\n\n#### 3.1 合适优于先进（Pragmatism）\n\n过度追求先进技术会增加复杂性与不可控性。\n架构应追求**稳态、可解释性、与组织能力匹配**。\n\n#### 3.2 简单优于复杂（Simplicity）\n\n软件复杂度会自然增长，架构必须主动控制复杂性。\nKISS、YAGNI、最小可行结构（MVS）是核心方法。\n\n#### 3.3 演化优于一步到位（Evolution）\n\n系统必然演化，提前构建“可演化能力”比提前构建“未来能力”更重要。\n变与不变应清晰分离。\n\n---\n\n## 4. 架构设计方法论\n\n### 4.1 识别复杂性：架构设计的起点\n\n复杂性来源四类因素：\n\n| 复杂性维度 | 示例        | 架构任务        |\n| ----- | --------- | ----------- |\n| 业务复杂性 | 高耦合业务规则   | 领域建模、聚合设计   |\n| 技术复杂性 | 分布式、并发    | 技术风格、基础设施能力 |\n| 操作复杂性 | 监控、部署、容量  | 可观测性、运维架构   |\n| 组织复杂性 | 人员能力、协作方式 | 治理体系、边界划分   |\n\n“倒找法”是发现隐性复杂度的有效方式：\n**从已知问题 → 找到系统对应问题 → 反推复杂性来源**\n\n---\n\n### 4.2 多方案设计：避免认知锁定\n\n架构师必须规避“单点思维陷阱”。\n因此：\n\n* 至少 3～5 个备选方案\n* 必须跨不同技术、不同结构风格\n* 强调差异性而非同质性\n\n归根结底，备选方案的价值不在于选择，而在于**扩展设计空间**。\n\n---\n\n### 4.3 质量属性驱动的架构评估（ATAM 思想简化版）\n\n步骤：\n\n1. 列出关键质量属性（性能、可用性、扩展性、安全性…）\n2. 按业务阶段排序\n3. 对每个架构方案逐项评估其满足度\n4. 找到风险点、敏感点、折衷点\n\n架构评估本质上就是找到“系统折衷面”与“长期成本曲线”。\n\n---\n\n### 4.4 详细方案设计：模型到工程的桥梁\n\n进入详细设计说明方案是“可构建的系统”，而非理念。\n\n需要特别关注：\n\n* 关键细节（往往决定方案成败）\n* 模型之间的契约\n* 不一致性（最危险的架构缺陷）\n* 集体智慧（多人评审强化模型完整性）\n\n---\n\n## 5. 架构视图体系\n\n下面将原来分散的模型统一为“六视图架构框架”。\n\n---\n\n### 5.1 架构立方体（Cube Model）\n\n这是对系统的六个本质维度的抽象：\n\n| 维度   | 描述           | 解决的问题     |\n| ---- | ------------ | --------- |\n| 应用视图 | 系统提供的核心能力    | 我们提供什么？   |\n| 技术视图 | 数据库、中间件、基础设施 | 系统运行在什么上？ |\n| 功能视图 | 业务逻辑分解       | 业务如何组织？   |\n| 运行视图 | 部署、运行时状态     | 系统如何运行？   |\n| 逻辑视图 | 抽象的系统结构      | 系统如何分解？   |\n| 物理视图 | 物理节点、拓扑      | 系统如何落地？   |\n\n这是一个**从抽象到现实**的分层模型。\n\n---\n\n## 6. 需求分析体系\n\n### 6.1 需求贯穿系统全生命周期\n\n需求是架构的约束来源，包括：\n\n* 功能性需求\n* 非功能需求（质量属性）\n* 限制条件（法律、安全、组织）\n* 假设与上下文（Context）\n\n### 6.2 V-模型（系统级方法论）\n\n你原文的描述极为详细，我在此抽象为：\n\n> **左侧：定义系统\n> 右侧：验证系统\n> 中间：构建系统**\n\n核心思想：\n\n* 所有需求都必须有对应的验证活动\n* 构建前（左侧）决定构建后（右侧）\n* 架构是需求到实现的纽带\n\n---\n\n## 7. 模块定义与系统边界\n\n### 7.1 高内聚、低耦合：永恒原则\n\n模块边界定义的是：\n\n* 认知边界\n* 演化边界\n* 团队边界\n* 运维边界\n\n**粗粒度模块 ≠ 简单\n细粒度模块 ≠ 高质量**\n边界的关键是是否对“变化”敏感。\n\n### 7.2 系统上下文（Context Diagram）\n\n系统上下文图用于定义：\n\n* 外部参与者\n* 外部系统\n* 交互方式\n* 数据与事件的方向\n\n它是“架构边界”的最底层事实。\n\n---\n\n## 8. 架构模型体系\n\n以下模型是架构师的基础建模工具：\n\n| 模型     | 目的          | 适用阶段  |\n| ------ | ----------- | ----- |\n| 用例模型   | 描述用户价值和系统能力 | 分析    |\n| 领域模型   | 识别业务不变性     | 架构    |\n| 鲁棒图    | 用例到对象模型的桥梁  | 分析→设计 |\n| 时序图    | 描述行为流程      | 设计    |\n| ER 图   | 数据建模        | 数据架构  |\n| 整体架构草图 | 快速表达结构      | 架构    |\n\n---\n\n## 9. 运行性模型（Run-time Model）\n\n运行视图关注系统在真实世界中的状态：\n\n* 部署单元（进程、容器、节点）\n* 执行单元（服务、函数）\n* 展示单元（终端、界面）\n* 数据单元（数据库、缓存、Stream）\n\n运行视图的重点不是图，而是：\n\n* 可观测性\n* 流量模型\n* 弹性与容量规划\n* 故障注入模型\n\n---\n\n## 10. 架构治理与演进\n\n真正的架构价值不在于设计，而在于**让系统可持续演进**：\n\n关键治理能力：\n\n1. **统一的模型语言**\n2. **标准化边界定义**\n3. **技术雷达与演进策略**\n4. **质量属性监控与反馈**\n5. **架构决策记录（ADR）**\n6. **组合式能力的可演化性**\n\n架构的终局不是完美，而是 **\"可改变且不崩溃\"**。\n\n## 关联内容（自动生成）\n\n- [/软件工程/架构/系统设计/分布式/分布式系统.md](/软件工程/架构/系统设计/分布式/分布式系统.md) 分布式系统设计与架构设计在系统复杂性管理、模块分解及架构治理方面有诸多共通之处，需要关注一致性、可用性等质量属性的权衡\n- [/软件工程/架构/系统设计/高并发.md](/软件工程/架构/系统设计/高并发.md) 高并发系统设计是架构设计的一个重要应用场景，涉及性能、扩展性等关键质量属性，与架构设计中的方法论和评估策略密切相关\n- [/软件工程/架构/系统设计/可用性.md](/软件工程/架构/系统设计/可用性.md) 可用性是架构设计中重要的质量属性之一，涉及容错、恢复、监控等系统设计方面，与整体架构蓝图的制定密切相关\n- [/软件工程/架构/系统设计/扩展性.md](/软件工程/架构/系统设计/扩展性.md) 扩展性是架构设计的重要质量属性，扩展性设计原则和模式是架构师必须掌握的核心知识，与架构的演化理念相互呼应\n- [/软件工程/架构/系统设计/缓存.md](/软件工程/架构/系统设计/缓存.md) 缓存是系统架构中的重要组件，其设计和使用是架构设计中技术选型和详细设计的重要组成部分，对系统性能有关键影响\n- [/软件工程/架构/系统设计/云原生.md](/软件工程/架构/系统设计/云原生.md) 云原生是一种现代系统架构模式，带来了新的架构理念、部署和运维方式，是架构设计需要考虑的重要技术方向\n- [/软件工程/架构/架构治理.md](/软件工程/架构/架构治理.md) 架构治理是确保架构设计能够有效落地和持续演进的管理体系，涵盖架构决策、规范制定、合规检查等重要机制\n- [/软件工程/架构/架构师.md](/软件工程/架构/架构师.md) 架构师是架构设计过程中的核心角色，其能力模型、职责范围、决策方法与架构设计的方法论和实践体系密切相关\n- [/软件工程/架构模式/架构模式.md](/软件工程/架构模式/架构模式.md) 架构模式是架构设计的重要参考，为解决常见架构问题提供成熟方案，是架构设计中结构层的重要组成部分\n- [/软件工程/架构/系统设计/可观测性.md](/软件工程/架构/系统设计/可观测性.md) 可观测性设计是现代系统架构的重要组成部分，涉及日志、监控、链路追踪等系统能力，是架构设计中不可忽视的质量要求\n- [/软件工程/架构/系统设计/网关.md](/软件工程/架构/系统设计/网关.md) 网关是现代系统架构中的重要基础设施，承担着流量管理、安全控制、协议转换等重要职责，是架构设计中的关键组件\n- [/软件工程/架构/系统设计/前端监控.md](/软件工程/架构/系统设计/前端监控.md) 前端监控是系统可观测性的重要组成部分，架构设计需考虑全链路的监控体系，从前端到后端形成完整闭环\n- [/计算机网络/网络安全/安全架构.md](/计算机网络/网络安全/安全架构.md) 安全架构是系统架构的重要方面，从安全角度审视系统设计，与常规架构设计在模型、原则和治理方面有共通之处\n- [/中间件/数据库/分布式数据库.md](/中间件/数据库/分布式数据库.md) 分布式数据库的选择和设计是架构设计的重要组成部分，对系统整体架构、扩展性、一致性等有深远影响\n- [/中间件/数据库/分库分表中间件.md](/中间件/数据库/分库分表中间件.md) 数据库中间件是解决数据扩展性问题的重要架构组件，是架构设计中数据层扩展策略的重要实现方式\n- [/数据技术/数据架构.md](/数据技术/数据架构.md) 数据架构是系统架构的重要子集，从数据视角审视系统设计，与应用架构的分界和协作是架构设计的关键考量\n- [/软件工程/架构/演进式架构.md](/软件工程/架构/演进式架构.md) 演进式架构是架构设计的重要理念，强调系统的可演化性，与本文档中提到的演化优于一步到位原则高度一致\n- [/软件工程/架构/系统设计/混沌工程.md](/软件工程/架构/系统设计/混沌工程.md) 混沌工程是验证系统架构稳定性的重要方法，通过主动引入故障来检验架构设计的有效性和系统的韧性\n- [/软件工程/架构/系统设计/流量控制.md](/软件工程/架构/系统设计/流量控制.md) 流量控制是系统架构中的重要环节，涉及限流、熔断、降级等策略，是实现系统可用性和稳定性的重要手段\n- [/软件工程/架构/系统设计/分布式/分布式共识算法.md](/软件工程/架构/系统设计/分布式/分布式共识算法.md) 分布式共识算法是分布式系统架构的核心技术，是实现数据一致性和系统可靠性的基础，与架构设计的分布式策略密切相关\n","metadata":"tags: ['计算机系统', '软件工程']","hasMoreCommit":true,"totalCommits":12,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: 整理标签","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2025-12-09T11:40:31+08:00","author":"MY","message":"docs(architecture): 重构架构设计文档，优化结构与内容表述","hash":"e7c31ffae68504aa94a6e99f3532c8a15d4a100c"},{"date":"2022-05-11T15:01:31+08:00","author":"cjiping","message":"✏️更新 架构","hash":"afb18fe967347f815b204ee9dec1c48fcd250b35"},{"date":"2022-05-05T17:38:27+08:00","author":"cjiping","message":"✏️更新 架构设计","hash":"7c9964f93906147a0d6f1185e359b13d011499ce"},{"date":"2022-05-04T23:12:11+08:00","author":"MY","message":"✏️更新 架构设计","hash":"15b035e289fad871e88c9924cc8aa328ea17c27b"},{"date":"2021-10-21T23:31:38+08:00","author":"My","message":"✏️更新 监控与可用性","hash":"7f0a843cb3614c331efd4e850f8657f0b14880cd"},{"date":"2021-10-17T23:19:31+08:00","author":"My","message":"✏️更新 架构设计","hash":"b71ac55d132dbce81725cc8abc041718148d79dc"},{"date":"2021-10-12T22:11:00+08:00","author":"My","message":"✏️更新 架构设计","hash":"a70aa0f0c26d82819bd74a475dc228a8906f47f9"},{"date":"2021-10-04T16:03:48+08:00","author":"My","message":"✏️更新 架构设计","hash":"f790427c7c64de61ecbdbf09fb98de80080a8831"},{"date":"2021-10-03T16:32:17+08:00","author":"My","message":"✏️更新 架构设计","hash":"407a77b66ed3e5faffe109c480a2e489ce1b13b8"}],"createTime":"2021-09-29T21:31:19+08:00"}