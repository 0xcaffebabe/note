# 软件架构

## 软件架构是什么

最适合当软件架构师的，是一线能力最强的程序员

软件架构的最高优先级是保持系统正常工作，软件架构的策略就是京可能长时间保留尽可能多的可选项

### 开发

一个软件系统的开发，应该就是要方便其开发团队

- 流行的不一定好，适合的才是最好的

一个系统的架构，反映了开发该系统的团队组织结构

### 部署

良好的软件结构可以让系统构建完成就能部署，同时实现一键式的轻松部署是设计软件架构的一个目标

### 运行

设计良好的架构能明确地反映出系统运行时的需求

架构是系统运行时的一个表示

### 维护

维护的主要成本

- 探秘：解决问题的最佳方式
- 风险：解决问题衍生出的新问题

### 保持可选项

**用例**：对系统如何响应外接请求的描述

软件系统可降解为

- 策略：业务逻辑
- 细节：具体实现技术，数据库、web等

在大部分时间，无法预知系统的所有用例，越晚决定实现细节，就能掌握更多信息，更有利于决策

### 设备无关性

高层策略与低层实现细节分离

### 解耦

系统可以被按层解耦，将不同层隔离开来，避免变化扩散到其他层

当对用例进行分组时，增加新用例就会对旧的用例影响降低

#### 解耦模式

- 源码解耦：控制源代码模块的依赖关系
- 部署层次解耦：控制可部署模块的依赖关系
- 服务解耦：依赖关系降低到服务层次

软件架构是生长的，从单体到相互独立可部署单元，再到服务化

设计良好的架构应该允许软件系统从单体到服务，也可以从服务退化到单体

### 重复

重复需要分清表面重复还是实际重复，随着软件的演进，两段重复的代码可能会变得不同

### 独立性

- 开发独立性：当对系统进行解耦时，不同的模块就可以由多个团队来分工开发
- 部署独立性：同样，解耦之后部署就可以互不影响

## 边界划分

软件架构设计就是一门划分边界的艺术

为了划分划分边界线，软件系统被分割成组件，这些组件的一部分是核心的业务相关组件，另一部分是非核心的但是是提供必要功能的组件，让这些非核心组件去依赖系统的核心组件

通过划清边界，可以推迟一些细节性的决策

### 何时何地划分

- 画在不相关的事情中间

IO是无关紧要的，软件系统的核心，是业务逻辑

### 插件式架构

软件开发技术发展的历史就是如何想方设法增加插件，这些插件要么可以去掉，要么要多种实现
