{"name":"架构模式","id":"软件工程-架构模式-架构模式","content":"# 架构模式\n\n## 一、架构模式的第一性分类轴\n\n架构模式并非“招式集合”，而是对**系统复杂性来源**的不同应对方式。所有架构模式，均可投影到以下稳定维度上。\n\n### 1. 控制流主导权\n\n* **调用驱动**：谁发起、谁控制执行顺序\n* **数据驱动**：数据到达即触发处理\n* **事件驱动**：状态变化驱动行为\n\n### 2. 数据与状态位置\n\n* 状态是否集中\n* 状态是否可共享\n* 状态是否可重建\n\n### 3. 构件耦合方式\n\n* 同步 / 异步\n* 显式调用 / 隐式触发\n* 时间耦合 / 空间耦合\n\n### 4. 演进与扩展方式\n\n* 通过修改扩展\n* 通过组合扩展\n* 通过插件化扩展\n\n> 后续所有模式，均基于这些维度进行组织。\n\n---\n\n## 二、架构风格（Architecture Style）\n\n> 架构风格关注的是：**系统整体组织方式**，决定了系统的“力学结构”。\n\n### 2.1 数据流风格（Data-Flow Oriented）\n\n#### 本质\n\n* 以**数据流动**作为系统的主导力量\n* 计算单元之间不共享状态\n\n#### 解决的根本问题\n\n* 如何提高吞吐量\n* 如何降低处理步骤之间的耦合\n\n#### 核心特征\n\n* 顺序或半顺序处理\n* 数据只向前流动\n* 节点职责单一\n\n#### 子模式\n\n##### 批处理（Batch Processing）\n\n* 强时间顺序\n* 强完整性校验\n* 强流程控制\n\n##### 管道-过滤器（Pipe & Filter）\n\n* 每个过滤器只关心输入与输出\n* 管道负责数据传输\n* 支持并行与复用\n\n#### 代价\n\n* 调试困难\n* 对实时交互不友好\n\n---\n\n### 2.2 调用-返回风格（Call-Return Oriented）\n\n#### 本质\n\n* 以**控制流**为核心\n* 调用方掌控执行顺序\n\n#### 解决的根本问题\n\n* 如何分解复杂问题\n* 如何通过层次化降低认知负担\n\n#### 典型形态\n\n* 主程序 / 子程序（过程式）\n* 面向对象调用\n* 分层架构\n\n#### 分层架构要点\n\n* 上层只依赖下层接口\n* 层内高内聚，层间低耦合\n\n#### 代价\n\n* 层级过多导致性能与灵活性下降\n\n---\n\n### 2.3 仓库风格（Repository Oriented）\n\n#### 本质\n\n* 以**共享数据**为中心\n* 构件通过共享数据协作\n\n#### 典型形式\n\n* 数据库系统\n* 超文本系统\n* 黑板系统\n\n#### 黑板模式的本质\n\n* 问题空间逐步收敛\n* 多专家系统协作求解\n\n#### 代价\n\n* 数据成为系统瓶颈\n* 数据一致性复杂\n\n---\n\n## 三、架构模式（Architecture Pattern）\n\n> 架构模式是在某一风格下，对**特定问题的可复用解决方案**。\n\n### 3.1 事件驱动架构（EDA）\n\n#### 本质\n\n* **状态变化驱动行为**\n* 构件之间不直接调用\n\n#### 解决的根本问题\n\n* 系统扩展性\n* 构件解耦\n\n#### 核心特征\n\n* 异步\n* 隐式调用\n* 松耦合\n\n#### 两种组织方式\n\n##### Mediator（有中心协调）\n\n* 事件语义转换\n* 业务流程编排\n\n##### Broker（无中心分发）\n\n* 纯消息路由\n* 无业务逻辑\n\n#### 代价\n\n* 调试与测试复杂\n* 异常路径成本高\n\n---\n\n### 3.2 微内核架构（Microkernel / Plug-in）\n\n#### 本质\n\n* **稳定核心 + 可变插件**\n\n#### 解决的根本问题\n\n* 长期演进\n* 功能差异化扩展\n\n#### 核心设计点\n\n* 核心职责最小化\n* 插件生命周期管理\n* 插件通信机制\n\n#### 代价\n\n* 架构设计难度高\n* 插件边界难以划分\n\n---\n\n## 四、领域逻辑组织模式（Domain Logic Organization）\n\n> 关注：**业务规则以什么形式存在**。\n\n### 4.1 事务脚本\n\n#### 本质\n\n* 以过程为中心\n\n#### 适用场景\n\n* 业务简单\n* 生命周期短\n\n#### 演进风险\n\n* 复杂度指数增长\n\n---\n\n### 4.2 领域模型\n\n#### 本质\n\n* 数据与行为合一\n* 业务概念显性化\n\n#### 核心价值\n\n* 抵抗复杂性\n* 业务语言统一\n\n#### 代价\n\n* 建模成本高\n* ORM复杂\n\n---\n\n### 4.3 表模块\n\n#### 本质\n\n* 围绕数据表组织逻辑\n\n#### 特点\n\n* 强依赖数据库结构\n* 适合数据密集型系统\n\n---\n\n### 4.4 服务层\n\n#### 本质\n\n* 定义系统对外边界\n* 协调领域对象\n\n#### 引入动机\n\n* 多客户端复用\n* 系统集成\n\n---\n\n## 五、基础设施与机制模式（Infrastructure & Mechanism）\n\n### 5.1 数据映射模式\n\n* 表数据入口\n* 行数据入口\n* 活动记录\n* 数据映射器\n\n> 趋势：领域模型 + 数据映射器\n\n---\n\n### 5.2 并发控制模式\n\n#### 根本矛盾\n\n* 并发 vs 一致性\n\n#### 核心策略\n\n* 乐观锁\n* 悲观锁\n* 粗粒度锁\n* 隐含锁\n\n---\n\n### 5.3 会话状态管理\n\n* 客户端会话状态\n* 服务端会话状态\n* 数据库存储\n\n> 本质权衡：**无状态扩展性 vs 状态一致性**\n\n---\n\n## 六、分布式边界模式\n\n### 6.1 远程外观\n\n* 粗粒度接口\n* 减少网络往返\n\n### 6.2 DTO\n\n* 跨进程数据载体\n* 仅包含可序列化数据\n\n### 6.3 组装器\n\n* 领域对象与DTO解耦\n\n---\n\n## 七、架构模式演进路径（认知模型）\n\n* 简单系统：事务脚本 → 表模块\n* 复杂业务：事务脚本 → 领域模型 → 服务层\n* 扩展压力：分层 → 事件驱动 / 微内核\n\n> **架构设计不是选模式，而是管理复杂性来源。**\n\n---\n\n## 八、总结\n\n* 架构模式是对复杂性的回应\n* 模式没有对错，只有边界\n* 优秀架构 = 稳定核心 + 可演进结构\n\n## 关联内容（自动生成）\n\n- [/软件工程/架构/架构.md](/软件工程/架构/架构.md) 架构模式是软件架构设计的具体实现方式，与整体架构理念和原则密切相关\n- [/软件工程/架构模式/分层架构.md](/软件工程/架构模式/分层架构.md) 分层架构是架构模式中最基础和常见的模式之一，与本文档中提到的架构风格和模式有直接关联\n- [/软件工程/设计模式/设计模式.md](/软件工程/设计模式/设计模式.md) 设计模式与架构模式在系统设计中有密切联系，设计模式是架构模式在更细粒度上的实现\n- [/软件工程/微服务/微服务.md](/软件工程/微服务/微服务.md) 微服务架构是现代架构模式的重要发展方向，体现了本文档中提到的构件解耦和扩展性原则\n- [/软件工程/架构模式/响应式架构.md](/软件工程/架构模式/响应式架构.md) 响应式架构是事件驱动架构的延伸和发展，体现了现代系统对高可用性和弹性的要求\n- [/软件工程/架构/系统设计/架构设计.md](/软件工程/架构/系统设计/架构设计.md) 系统架构设计是架构模式的实际应用场景，将理论模式转化为具体的设计方案\n- [/软件工程/架构模式/Web框架.md](/软件工程/架构模式/Web框架.md) Web框架是架构模式在Web开发中的具体体现，展示了如何将架构模式应用于特定领域\n- [/软件工程/架构/系统设计/分布式/分布式系统.md](/软件工程/架构/系统设计/分布式/分布式系统.md) 分布式系统设计中广泛应用了本文档提到的各种架构模式，特别是事件驱动和分层架构\n- [/软件工程/架构/架构治理.md](/软件工程/架构/架构治理.md) 架构治理确保架构模式在实际项目中的正确实施和持续演进\n- [/软件工程/领域驱动设计.md](/软件工程/领域驱动设计.md) DDD与架构模式密切相关，特别是在领域逻辑组织模式方面，两者相辅相成\n","metadata":"tags: ['计算机系统', '软件工程', '设计模式', '分布式系统', '数据技术']","hasMoreCommit":true,"totalCommits":24,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: 整理标签","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2026-01-14T17:43:11+08:00","author":"MY","message":"docs(架构): 更新架构模式文档内容并添加相关图片资源","hash":"cb46d1fa9e1467e384300cd5f22c68a42fea2fe1"},{"date":"2025-11-16T21:30:56+08:00","author":"MY","message":"docs: 统一并精简文档标签","hash":"21362e9d7aeb62e05364cd5e7f3a3c24d7e293c7"},{"date":"2025-09-10T16:04:53+08:00","author":"MY","message":"docs(architecture): update architecture patterns documentation","hash":"e432bd3b11bac2375e1fb89430f70e1fcbdf9e77"},{"date":"2024-12-27T13:54:07+08:00","author":"MY","message":"📦架构模式","hash":"e31397c57f070cb93528cd5b1e2bc035fa94d032"},{"date":"2024-10-25T11:43:52+08:00","author":"MY","message":"📦架构模式","hash":"7a4552433037b568c78fb856bbb5268f027deae4"},{"date":"2024-10-24T19:49:57+08:00","author":"MY","message":"📦架构模式","hash":"a551d051619867158bb04eeaa366fa6e7a0f13d1"},{"date":"2023-03-09T09:41:00Z","author":"My","message":"🛠替换在线图片","hash":"0c8b08bc22fbe482ba02da2f1fcad211441d3c23"},{"date":"2022-05-30T18:16:33+08:00","author":"cjiping","message":"✏️更新 架构模式","hash":"3e437a94f24a8a98cbcee73c98dcf9ec8191086b"},{"date":"2022-05-09T21:01:06+08:00","author":"MY","message":"✏️更新 扩展性","hash":"6a0623425340413483e448a9c2bee55c5b6fd708"}],"createTime":"2020-01-11T14:47:57+08:00"}