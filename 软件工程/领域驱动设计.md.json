{"name":"领域驱动设计","id":"软件工程-领域驱动设计","content":"# 领域驱动设计\n\n> **核心立场**：DDD 不是一套建模技巧集合，而是一种**在复杂业务系统中，通过语言、边界与模型压缩认知复杂度、协调组织协作的系统性方法论**。\n\n![DD分层与六边形架构与整洁架构](/assets/2022524203432.webp)\n\n---\n\n## 一、第一性原理层（Why）——DDD 为什么存在\n\n### 1. 复杂系统的根本矛盾\n\n* 业务复杂度随时间 **不可逆增长**\n* 人类个体认知能力 **强约束**\n* 团队协作导致 **认知分裂与语义漂移**\n\n> **DDD 的根本问题**：\n> 如何在长期演进的复杂系统中，让多个角色对“系统是什么、在做什么”保持一致理解。\n\n---\n\n### 2. DDD 的第一性原理\n\n| 原理       | 本质解释                      |\n| -------- | ------------------------- |\n| 语言即模型    | 语言是认知的载体，不一致的语言必然导致不一致的系统 |\n| 边界先于实现   | 不清晰的边界会放大复杂度              |\n| 不变性优先    | 稳定的不变性是系统演进的锚点            |\n| 模型是认知压缩  | 好模型 = 用更少概念表达更多规则         |\n| 架构是组织的映射 | 系统结构反映沟通结构（Conway 定律）     |\n\n---\n\n## 二、认知与语言层（What）——我们如何理解业务世界\n\n### 1. 领域（Domain）\n\n> **领域 = 一个被语言和规则定义的问题空间**\n\n* 不是“系统边界”\n* 而是“业务问题的认知边界”\n\n---\n\n### 2. 子域（Subdomain）\n\n子域是对领域的**问题拆分方式**：\n\n| 子域类型 | 认知价值   | 战略意义   |\n| ---- | ------ | ------ |\n| 核心子域 | 差异化竞争力 | 投入最强人力 |\n| 支撑子域 | 支持核心   | 可内部实现  |\n| 通用子域 | 通用能力   | 可购买/外包 |\n\n> **子域划分的本质**：资源配置与注意力分配。\n\n---\n\n### 3. 通用语言（Ubiquitous Language）\n\n> **通用语言 = 团队共享的业务世界观**\n\n* 业务人员、产品、研发使用**同一组术语**\n* 语言变化 = 模型变化 = 系统变化\n\n**原则**：\n\n* 代码是通用语言的最终载体\n* 文档仅用于解释“代码未表达的意图”\n\n---\n\n## 三、模型层（How）——如何构建可演化的认知结构\n\n### 1. 模型的定义\n\n> **模型 = 对现实知识的有意简化 + 结构化表达**\n\n模型的价值不在“是否完整”，而在：\n\n* 是否帮助决策\n* 是否约束行为\n* 是否降低沟通成本\n\n---\n\n### 2. 有效建模的判定标准\n\n| 维度   | 判定问题        |\n| ---- | ----------- |\n| 可执行性 | 是否能指导代码结构？  |\n| 表达力  | 是否自然表达业务规则？ |\n| 稳定性  | 是否围绕不变性构建？  |\n| 演化性  | 是否允许逐步精进？   |\n\n---\n\n### 3. 模型与实现的闭环\n\n> **脱离实现的模型必然腐化**\n\n* 建模者必须参与编码\n* 实现反向促进模型理解\n\n---\n\n## 四、战术设计层（Structure）——模型如何落地为结构\n\n> 本层关注：**在单一边界内，如何保持模型一致性**\n\n---\n\n### 1. 实体（Entity）\n\n* 由**身份标识**定义\n* 拥有生命周期\n* 业务行为应内聚于实体\n\n---\n\n### 2. 值对象（Value Object）\n\n* 无身份\n* 不可变\n* 表达度量、描述、约束\n\n---\n\n### 3. 聚合（Aggregate）\n\n> **聚合 = 一致性与不变性的最小边界**\n\n**核心原则**：\n\n1. 只通过聚合根访问\n2. 聚合内强一致\n3. 聚合之间最终一致\n4. 聚合要“小而自洽”\n\n---\n\n### 4. 领域服务（Domain Service）\n\n* 表达**跨实体但仍属于领域的行为**\n* 无状态\n* 不应成为逻辑垃圾桶\n\n---\n\n### 5. Repository & Factory\n\n* Factory：复杂对象/聚合的**原子创建**\n* Repository：聚合的**生命周期访问接口**\n\n> 二者的本质区别在于：\n> **创建 vs 已存在对象的获取**\n\n---\n\n## 五、边界与协作层（Boundary）——如何在组织中保持一致性\n\n### 1. 限界上下文（Bounded Context）\n\n> **限界上下文 = 语言与模型的生效范围**\n\n* 同名 ≠ 同义\n* 上下文是语义的防火墙\n\n---\n\n### 2. 上下文映射（Context Mapping）\n\n> 上下文关系 = 组织协作关系\n\n| 场景      | 推荐策略              |\n| ------- | ----------------- |\n| 强协作、强控制 | 共享核心模型     |\n| 受制于外部   | 防腐层               |\n| 收益低     | 分开演进     |\n| 服务化输出   | 定义标准化接口给外部 |\n\n---\n\n## 六、演进与重构层（Evolution）——模型如何随认知成长\n\n### 1. 重构的本质\n\n> **DDD 重构 = 模型认知升级，而非代码洁癖**\n\n触发信号：\n\n* 新理解无法表达\n* 隐式规则过多\n* 模型开始僵化\n\n---\n\n### 2. 从隐式到显式\n\n* 提炼概念\n* 引入 Specification\n* 将过程行为转为对象职责\n\n---\n\n### 3. 突破与风险\n\n* 质变来自持续量变\n* 模型突破往往意味着系统级调整\n\n---\n\n## 七、战略设计层（Direction）——长期竞争力的来源\n\n### 1. 核心域（Core Domain）\n\n> **核心域 = 组织最值得投入认知与人才的地方**\n\n* 高复杂度\n* 高差异化\n* 高回报\n\n---\n\n### 2. 精炼与分离策略\n\n* Generic Subdomain：降级处理\n* Segregated Core：增强内聚\n* Abstract Core：抽象不变性\n\n---\n\n## 八、适用边界与常见误区\n\n### 1. DDD 不解决的问题\n\n* 性能极限\n* 人员能力差异\n* 需求本身不清晰\n\n---\n\n### 2. 常见误区\n\n* 所有系统都用 DDD\n* 战术设计替代战略思考\n* 把 DDD 当成代码规范\n\n---\n\n## 九、总结：DDD 的真正价值\n\n> **DDD 的终极价值不在于“代码长什么样”，而在于：**\n\n* 团队是否拥有一致的业务世界观\n* 系统是否围绕不变性演进\n* 组织是否通过模型降低了复杂度\n\n## 关联内容（自动生成）\n\n- [/软件工程/微服务/服务建模.md](/软件工程/微服务/服务建模.md) 服务建模中详细讨论了DDD的聚合、实体、值对象等概念在微服务架构中的应用\n- [/软件工程/架构/系统设计/业务建模.md](/软件工程/架构/系统设计/业务建模.md) 业务建模涵盖了DDD中的限界上下文、实体、值对象、聚合等核心概念\n- [/软件工程/架构模式/分层架构.md](/软件工程/架构模式/分层架构.md) 分层架构与DDD紧密结合，DDD的分层架构将业务核心（Domain）作为稳定层\n- [/软件工程/架构模式/基本模式.md](/软件工程/架构模式/基本模式.md) 基本模式中包含了值对象等DDD核心概念的详细说明\n- [/软件工程/理论/结构化分析方法.md](/软件工程/理论/结构化分析方法.md) 结构化分析与DDD结合使用，结构化分析侧重信息流与过程，领域驱动设计侧重领域模型和业务逻辑封装\n- [/数据技术/数据网格.md](/数据技术/数据网格.md) 数据网格采用领域驱动设计思想，通过领域导向的数据所有权实现数据架构的合理划分\n- [/编程语言/JAVA/框架/ORM.md](/编程语言/JAVA/框架/ORM.md) ORM框架通过实体映射实现对象-关系映射，与DDD的实体概念相关联\n- [/软件工程/设计模式/创建型模式.md](/软件工程/设计模式/创建型模式.md) 创建型模式在领域模型构建中发挥重要作用，与DDD中的工厂模式等概念相关\n\n","metadata":"tags: ['数据技术', '架构设计', '软件工程', '设计模式']\nstandardName: 'Domain Driven Design'\nalias: ['ddd', '领域驱动设计']\nlevel: 1\nbooks: [\n  {name: '领域驱动设计:软件核心复杂性应对之道'}\n]","hasMoreCommit":true,"totalCommits":30,"commitList":[{"date":"2026-02-12T14:07:03+08:00","author":"MY","message":"doc: 整理标签","hash":"290b3e8ad18f48832ac282290238d020fc030a88"},{"date":"2026-01-20T18:19:24+08:00","author":"MY","message":"docs(software-engineering): 更新领域驱动设计文档中的集成模式翻译","hash":"5d57aeb311984beb5d5f8b2fff4efbe5eb30476d"},{"date":"2026-01-06T16:50:48+08:00","author":"MY","message":"docs(软件工程): 更新领域驱动设计文档标题","hash":"a804b345d4402c87fd142edd7dfb9208418d25a6"},{"date":"2026-01-06T16:47:05+08:00","author":"MY","message":"docs(ddd): 领域驱动设计文档升维重构","hash":"6291aa96c4e5e74ea1cd059bc9abff6104b99766"},{"date":"2024-11-15T15:13:06+08:00","author":"MY","message":"📦软件设计","hash":"72559316d91a8efb68055aa4f2a0af774fc2d724"},{"date":"2023-12-20T15:49:16+08:00","author":"MY","message":"✏领域驱动设计","hash":"1f4a490b70ad5d0bc865d409c39d2568616c60f5"},{"date":"2023-04-02T13:46:18+08:00","author":"MY","message":"⚒️知识金字塔","hash":"5227586de5c794724e2571f2abfca0dd0f1fff7f"},{"date":"2022-08-22T16:53:15+08:00","author":"cjiping","message":"✏️业务建模","hash":"a4b1b02ab7abdea168104f8a036d94e9ad24e12a"},{"date":"2022-06-09T21:51:44+08:00","author":"MY","message":"📦整理 Java","hash":"34c01b44e7566fa54773149765e3dd8420235279"},{"date":"2022-05-29T20:38:33+08:00","author":"MY","message":"✏️更新 DDD","hash":"df955b49861c512f800f78b3adc1f5e7e30ab399"}],"createTime":"2020-07-15T16:40:26+08:00"}